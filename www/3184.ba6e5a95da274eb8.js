"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3184],{3184:(Z,O,d)=>{d.r(O),d.d(O,{CustomerOrdersPageModule:()=>m});var c=d(6814),r=d(95),a=d(9004),f=d(2436),C=d(5861),e=d(5678),y=d(5565);function p(n,u){if(1&n&&(e.TgZ(0,"ion-text",34),e._uU(1),e.qZA()),2&n){const o=e.oxw().$implicit;e.xp6(1),e.Oqu(o.deliveryOption.type)}}function U(n,u){1&n&&(e.TgZ(0,"ion-text",34),e._uU(1,"Pickup"),e.qZA())}function b(n,u){if(1&n&&(e.TgZ(0,"ion-text"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const o=e.oxw().$implicit;e.xp6(1),e.hij("Delivery on ",e.xi3(2,1,o.listingData.orderDeliveredOn,"dd MMMM EEE"),"")}}function t(n,u){if(1&n&&(e.TgZ(0,"ion-text"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const o=e.oxw().$implicit;e.xp6(1),e.hij("Pickup on ",e.xi3(2,1,o.listingData.orderDeliveredOn,"dd MMMM EEE"),"")}}function g(n,u){if(1&n){const o=e.EpF();e.TgZ(0,"div",22)(1,"ion-card",23),e.NdJ("click",function(){const l=e.CHM(o).$implicit,h=e.oxw();return e.KtG(h.navigateToOrderOverView(l))}),e.TgZ(2,"ion-row")(3,"ion-col")(4,"ion-text"),e._uU(5),e.qZA()(),e.TgZ(6,"ion-col")(7,"ion-text"),e._uU(8),e.qZA()()(),e.TgZ(9,"ion-row")(10,"ion-col")(11,"ion-text"),e._uU(12),e.ALo(13,"date"),e.qZA()()(),e.TgZ(14,"ion-row")(15,"ion-col",24)(16,"ion-text",25),e._uU(17),e.qZA()(),e.TgZ(18,"ion-col",26),e._UZ(19,"ion-icon",27),e.qZA()(),e.TgZ(20,"ion-row")(21,"ion-col")(22,"div",28),e._UZ(23,"ion-icon",29),e.YNc(24,p,2,1,"ion-text",30)(25,U,2,0,"ion-text",30),e.qZA()()(),e.TgZ(26,"ion-row")(27,"ion-col",31),e.YNc(28,b,3,4,"ion-text",32)(29,t,3,4,"ion-text",32),e.qZA(),e.TgZ(30,"ion-col",33)(31,"ion-text",25),e._uU(32),e.qZA()()()()()}if(2&n){const o=u.$implicit;e.xp6(5),e.hij("Order ",o.ID,""),e.xp6(3),e.hij("Order ",o.status,""),e.xp6(4),e.hij("Order Ends on ",e.xi3(13,9,o.listingData.orderEndsOn,"dd MMMM EEE hh:mm a"),""),e.xp6(5),e.Oqu(o.listingData.label),e.xp6(7),e.Q6J("ngIf","Pickup Available"!=o.deliveryOption.type),e.xp6(1),e.Q6J("ngIf","Pickup Available"==o.deliveryOption.type),e.xp6(3),e.Q6J("ngIf","Pickup Available"!=o.deliveryOption.type),e.xp6(1),e.Q6J("ngIf","Pickup Available"==o.deliveryOption.type),e.xp6(3),e.hij("\u20b9 ",o.itemsCostIncludingCharges,"")}}const _=[{path:"",component:(()=>{var n;class u{constructor(i,s){this.router=i,this.adminService=s,this.orders=[],this.defaultSegment="Live"}ngOnInit(){this.changeSegment({target:{value:this.defaultSegment}})}ngAfterViewInit(){var i=this;return(0,C.Z)(function*(){const s=yield i.adminService.presentLoading();i.adminService.getCustomerOrders({}).subscribe(l=>{l.success&&l.data&&(i.orders=l.data),s.dismiss()},l=>{console.log(l),s.dismiss()})})()}goToDashboard(){this.router.navigate(["/customerListings"])}goToProfile(){this.router.navigate(["/customerProfile"])}navigateToOrderOverView(i){this.router.navigateByUrl("/orderOverView/"+i._id)}changeSegment(i){this.adminService.getCustomerOrders({value:i.target.value}).subscribe(s=>{s.success&&s.data&&(this.orders=s.data)},s=>{console.log(s)})}}return(n=u).\u0275fac=function(i){return new(i||n)(e.Y36(f.F0),e.Y36(y.l))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-customer-orders"]],decls:41,vars:4,consts:[[2,"box-shadow","none","background","white",3,"translucent"],[1,"kd_center_align_items",2,"padding","12px 0px"],["name","bag-handle-outline",1,"kd_svg_size","padd_left"],[2,"padding-left","10px"],[2,"padding","0px","--background","white","box-shadow","none","background-color","#dfd9f1","--box-shadow","none"],[3,"ngModel","ionChange","ngModelChange"],["value","Live"],["value","Favourite"],["value","Delivered"],["value","Cancelled"],[3,"fullscreen"],["style","margin: 15px 5px 20px 5px;",4,"ngFor","ngForOf"],[2,"height","100px"],[2,"bottom","0px","position","absolute"],[2,"margin","0px","border-radius","0px","padding","10px"],[1,"kd_flex","kd_flex_col_center","ion-activatable","ripple-parent"],[1,"ripple_background"],["name","bag-handle-outline",1,"footer_icon_styles"],[1,"icon-text_styles"],[1,"kd_flex","kd_flex_col_center","ion-activatable","ripple-parent",3,"click"],["name","list-circle-outline",1,"footer_icon_styles"],["name","person-circle-outline",1,"footer_icon_styles"],[2,"margin","15px 5px 20px 5px"],[1,"kd_orders_card",2,"padding","10px",3,"click"],["size","10"],[2,"font-weight","bold"],["size","2",1,"kd_flex","kd_end_align"],["name","arrow-forward-circle-outline",1,"icon_style",2,"height","32px","width","32px","padding-right","0px"],[1,"kd_flex"],["name","bicycle-outline",1,"icon_style"],["style","font-weight: 500;",4,"ngIf"],["size","9"],[4,"ngIf"],["size","3",1,"kd_flex","kd_end_align"],[2,"font-weight","500"]],template:function(i,s){1&i&&(e.TgZ(0,"ion-header",0)(1,"ion-row")(2,"ion-col",1),e._UZ(3,"ion-icon",2),e.TgZ(4,"ion-text",3),e._uU(5,"Orders"),e.qZA()()(),e.TgZ(6,"ion-toolbar",4)(7,"ion-segment",5),e.NdJ("ionChange",function(h){return s.changeSegment(h)})("ngModelChange",function(h){return s.defaultSegment=h}),e.TgZ(8,"ion-segment-button",6)(9,"ion-label"),e._uU(10,"Live"),e.qZA()(),e.TgZ(11,"ion-segment-button",7)(12,"ion-label"),e._uU(13,"Favourite"),e.qZA()(),e.TgZ(14,"ion-segment-button",8)(15,"ion-label"),e._uU(16,"Delivered"),e.qZA()(),e.TgZ(17,"ion-segment-button",9)(18,"ion-label"),e._uU(19,"Cancelled"),e.qZA()()()()(),e.TgZ(20,"ion-content",10),e.YNc(21,g,33,12,"div",11),e._UZ(22,"div",12),e.qZA(),e.TgZ(23,"ion-footer",13)(24,"ion-card",14)(25,"ion-row")(26,"ion-col",15),e._UZ(27,"ion-ripple-effect",16)(28,"ion-icon",17),e.TgZ(29,"ion-text",18),e._uU(30,"Orders"),e.qZA()(),e.TgZ(31,"ion-col",19),e.NdJ("click",function(){return s.goToDashboard()}),e._UZ(32,"ion-ripple-effect",16)(33,"ion-icon",20),e.TgZ(34,"ion-text",18),e._uU(35,"Listings"),e.qZA()(),e.TgZ(36,"ion-col",19),e.NdJ("click",function(){return s.goToProfile()}),e._UZ(37,"ion-ripple-effect",16)(38,"ion-icon",21),e.TgZ(39,"ion-text",18),e._uU(40,"Profile"),e.qZA()()()()()),2&i&&(e.Q6J("translucent",!0),e.xp6(7),e.Q6J("ngModel",s.defaultSegment),e.xp6(13),e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("ngForOf",s.orders))},dependencies:[c.sg,c.O5,r.JJ,r.On,a.PM,a.wI,a.W2,a.fr,a.Gu,a.gu,a.Q$,a.H$,a.Nd,a.cJ,a.GO,a.yW,a.sr,a.QI,c.uU],styles:["ion-segment-button[_ngcontent-%COMP%]{--color-checked: #61399f;text-transform:none;font-size:12px;--padding-start: 0px;--padding-end: 0px;min-width:min-content}.padd_left[_ngcontent-%COMP%]{padding-left:20px}"]}),u})()}];let x=(()=>{var n;class u{}return(n=u).\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.Bz.forChild(_),f.Bz]}),u})(),m=(()=>{var n;class u{}return(n=u).\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,r.u5,a.Pc,x]}),u})()},5565:(Z,O,d)=>{d.d(O,{l:()=>y});var c=d(5861),r=d(553),a=d(5678),f=d(2436),C=d(9862),e=d(4414);let y=(()=>{var p;class U{constructor(t,g,v,_){this.route=t,this.http=g,this.alertController=v,this.loadingController=_}getUsersCount(t){return this.http.post(r.N.baseUrl+"/admin/getUsersCount",t)}getListingsCount(t){return this.http.post(r.N.baseUrl+"/admin/getListingsCount",t)}getAllListings(t){return this.http.post(r.N.baseUrl+"/admin/getAllListings",t)}getListingBasedOnId(t){return this.http.post(r.N.baseUrl+"/admin/getListingBasedOnId",t)}getAllUsersList(t){return this.http.post(r.N.baseUrl+"/admin/getAllUsersList",t)}getUserBasedOnId(t){return this.http.post(r.N.baseUrl+"/admin/getUserBasedOnId",t)}activeDeActiveListing(t){return this.http.post(r.N.baseUrl+"/admin/activeDeActiveListing",t)}createMaker(t){return this.http.post(r.N.baseUrl+"/admin/createMaker",t)}updateKitchenImages(t){return this.http.post(r.N.baseUrl+"/admin/updateKitchenImages",t)}updateBankDetails(t){return this.http.post(r.N.baseUrl+"/admin/updateBankDetails",t)}getUserOverView(t){return this.http.post(r.N.baseUrl+"/admin/getUserOverView",t)}activeDeActiveUser(t){return this.http.post(r.N.baseUrl+"/admin/activeDeActiveUser",t)}getMakerDashboardData(t){return this.http.post(r.N.baseUrl+"/maker/getMakerDashboardData",t)}addEditListing(t){return this.http.post(r.N.baseUrl+"/maker/addEditListing",t)}deleteListing(t){return this.http.post(r.N.baseUrl+"/maker/deleteListing",t)}changeOrderStatus(t){return this.http.post(r.N.baseUrl+"/maker/changeOrderStatus",t)}toggleMakerStatus(t){return this.http.post(r.N.baseUrl+"/maker/toggleMakerStatus",t)}updateCustomerDetails(t){return this.http.post(r.N.baseUrl+"/customer/updateCustomerDetails",t)}getCustomerOrders(t){return this.http.post(r.N.baseUrl+"/customer/getCustomerOrders",t)}getAllListingsForCustomer(t){return this.http.post(r.N.baseUrl+"/auth/getAllListingsForCustomer",t)}setFavItem(t){return this.http.post(r.N.baseUrl+"/customer/setFavItem",t)}setUnFavItem(t){return this.http.post(r.N.baseUrl+"/customer/setUnFavItem",t)}getListingForUser(t){return this.http.post(r.N.baseUrl+"/auth/getListingForUser",t)}getCustomerAddress(t){return this.http.post(r.N.baseUrl+"/customer/getCustomerAddress",t)}deleteTempOrder(t){return this.http.post(r.N.baseUrl+"/customer/deleteTempOrder",t)}addCustomerAddress(t){return this.http.post(r.N.baseUrl+"/customer/addCustomerAddress",t)}setDefaultAddress(t){return this.http.post(r.N.baseUrl+"/customer/setDefaultAddress",t)}deleteAddress(t){return this.http.post(r.N.baseUrl+"/customer/deleteAddress",t)}addToCart(t){return this.http.post(r.N.baseUrl+"/customer/addToCart",t)}getCustomerOrderSummary(t){return this.http.post(r.N.baseUrl+"/customer/getCustomerOrderSummary",t)}placeOrder(t){return this.http.post(r.N.baseUrl+"/customer/placeOrder",t)}createOrderInRazorPay(t){return this.http.post(r.N.baseUrl+"/customer/createOrderInRazorPay",t)}payWithRazorpay(t,g,v){var _=this;return(0,c.Z)(function*(){return new Promise(function(){var x=(0,c.Z)(function*(m,n){const u={key:r.N.razorpayKey,amount:100*g,currency:"INR",name:"Vdream Innovations (OPC) private limited",description:"Vdream Innovations",order_id:t,handler:(i=(0,c.Z)(function*(s){try{let h={...yield _.verifyPayment({verify:s}),...s};console.log({obj:h}),m(h)}catch(l){console.log({error:l}),n(l)}}),function(l){return i.apply(this,arguments)}),prefill:{name:"test",email:"test",contact:"test"},theme:{color:"#3399cc"},modal:{ondismiss:()=>{n({message:"Your payment has been cancelled."})}},retry:{enabled:!1}},o=new Razorpay(u);var i;yield o.on("payment.failed",function(){var i=(0,c.Z)(function*(s){let l=s.error||s||{};l.message=l.message||l.description,o.close(),console.log("closed"),n(l)});return function(s){return i.apply(this,arguments)}}()),yield o.open()});return function(m,n){return x.apply(this,arguments)}}())})()}verifyPayment(t){return this.http.post(r.N.baseUrl+"/customer/verifyPaymentDetails",t)}savePaymentFailedDetails(t){return this.http.post(r.N.baseUrl+"/customer/savePaymentFailedDetails",t)}presentDeleteConfirmation(t,g,v){var _=this;return(0,c.Z)(function*(){return new Promise(function(){var x=(0,c.Z)(function*(m){yield(yield _.alertController.create({header:t,message:g,cssClass:v,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{m(!1)}},{text:"OK",cssClass:"primary",handler:()=>{m(!0)}}]})).present()});return function(m){return x.apply(this,arguments)}}())})()}presentLoading(){var t=this;return(0,c.Z)(function*(){const g=yield t.loadingController.create({message:"Loading...",translucent:!0,backdropDismiss:!1});return yield g.present(),g})()}}return(p=U).\u0275fac=function(t){return new(t||p)(a.LFG(f.F0),a.LFG(C.eN),a.LFG(e.Br),a.LFG(e.HT))},p.\u0275prov=a.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),U})()}}]);