"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9041],{9041:(D,y,d)=>{d.r(y),d.d(y,{OrdersOverviewPageModule:()=>h});var p=d(6814),i=d(95),u=d(9004),U=d(2436),e=d(5678),b=d(5565),A=d(6593);function _(s,l){if(1&s&&(e.TgZ(0,"ion-row",21)(1,"ion-col",38)(2,"ion-text",26),e._uU(3),e.qZA()(),e.TgZ(4,"ion-col",24)(5,"ion-text",39),e._uU(6),e._UZ(7,"ion-icon",40),e._uU(8),e.qZA()(),e.TgZ(9,"ion-col",41)(10,"ion-text",42),e._uU(11),e.qZA()()()),2&s){const r=l.$implicit;e.xp6(3),e.Oqu(r.name),e.xp6(3),e.hij("\u20b9 ",r.price," "),e.xp6(2),e.hij(" ",r.count,""),e.xp6(3),e.hij(" = $",r.individualItemCost,"")}}function Z(s,l){1&s&&(e.TgZ(0,"ion-text",43),e._uU(1,"Delivery Location"),e.qZA())}function w(s,l){1&s&&(e.TgZ(0,"ion-text",43),e._uU(1,"Pickup Location"),e.qZA())}function t(s,l){if(1&s){const r=e.EpF();e.TgZ(0,"ion-text",44),e.NdJ("click",function(){e.CHM(r);const o=e.oxw(2);return e.KtG(o.redirectToGoogleMaps())}),e.TgZ(1,"span",45),e._uU(2),e.qZA()()}if(2&s){const r=e.oxw(2);e.xp6(2),e.Oqu(r.orderData.deliveryAddress.LocationUrl)}}function g(s,l){if(1&s){const r=e.EpF();e.TgZ(0,"ion-text",44),e.NdJ("click",function(){e.CHM(r);const o=e.oxw(2);return e.KtG(o.redirectToGoogleMaps())}),e.TgZ(1,"span",45),e._uU(2),e.qZA()()}if(2&s){const r=e.oxw(2);e.xp6(2),e.Oqu(null==r.orderData.listingData?null:r.orderData.listingData.address)}}function f(s,l){if(1&s){const r=e.EpF();e.TgZ(0,"ion-content",7)(1,"div",8)(2,"ion-row")(3,"ion-col")(4,"ion-text"),e._uU(5),e.qZA(),e._UZ(6,"br"),e.TgZ(7,"ion-text",9),e._uU(8),e.qZA()()(),e.TgZ(9,"ion-row",10)(10,"ion-col",11)(11,"div",12)(12,"ion-text",13),e._uU(13,"R"),e.qZA()(),e.TgZ(14,"ion-text",14)(15,"span",13),e._uU(16,"Maker"),e.qZA(),e._UZ(17,"br"),e.TgZ(18,"span"),e._uU(19),e.qZA(),e._UZ(20,"br"),e.TgZ(21,"span"),e._uU(22),e.qZA()()(),e.TgZ(23,"ion-col",15),e.NdJ("click",function(){e.CHM(r);const o=e.oxw();return e.KtG(o.callNumber(o.orderData.makerData.mobileNumber))}),e._UZ(24,"ion-icon",16),e.qZA()(),e.TgZ(25,"ion-row")(26,"ion-col",17)(27,"ion-text",13),e._uU(28),e.qZA()()(),e.TgZ(29,"ion-row")(30,"ion-col",18)(31,"div",19),e.YNc(32,_,12,4,"ion-row",20),e.TgZ(33,"ion-row",21)(34,"ion-col",22)(35,"ion-text",23),e._uU(36,"GST"),e.qZA()(),e.TgZ(37,"ion-col",24)(38,"ion-text",25),e._uU(39),e.qZA()()(),e.TgZ(40,"ion-row",21)(41,"ion-col",22)(42,"ion-text",23),e._uU(43),e.qZA()(),e.TgZ(44,"ion-col",24)(45,"ion-text",25),e._uU(46),e.qZA()()(),e.TgZ(47,"ion-row",21)(48,"ion-col",22)(49,"ion-text",26),e._uU(50,"Total"),e.qZA()(),e.TgZ(51,"ion-col",24)(52,"ion-text",26),e._uU(53),e.qZA()()()()()(),e.TgZ(54,"ion-row")(55,"ion-col")(56,"ion-text",27),e._uU(57,"Delivery Details"),e.qZA()()(),e.TgZ(58,"ion-row",10)(59,"ion-col")(60,"div",28),e._UZ(61,"ion-icon",29),e.TgZ(62,"ion-text",30),e._uU(63,"Delivery Address"),e.qZA()()()(),e.TgZ(64,"ion-row")(65,"ion-col")(66,"ion-text",31),e._uU(67),e._UZ(68,"br"),e._uU(69),e._UZ(70,"br"),e._uU(71),e._UZ(72,"br")(73,"br")(74,"ion-text",32),e.qZA()()(),e.TgZ(75,"ion-row",33)(76,"ion-col")(77,"div",34),e._UZ(78,"ion-icon",35),e.YNc(79,Z,2,0,"ion-text",36)(80,w,2,0,"ion-text",36),e.qZA(),e.YNc(81,t,3,1,"ion-text",37)(82,g,3,1,"ion-text",37),e.qZA()()()()}if(2&s){const r=e.oxw();e.Q6J("fullscreen",!0),e.xp6(5),e.hij("Order ",r.orderData.ID,""),e.xp6(3),e.hij("Placed on: ",r.formatTimestamp(r.orderData.timeStamp),""),e.xp6(11),e.Oqu(r.orderData.makerData.userName),e.xp6(3),e.Oqu(r.orderData.makerData.address),e.xp6(6),e.Oqu(r.orderData.listingData.label),e.xp6(4),e.Q6J("ngForOf",null==r.orderData?null:r.orderData.orderedItems),e.xp6(7),e.hij("\u20b9 ",r.orderData.gstAmount,""),e.xp6(4),e.hij("Delivery (",r.orderData.deliveryOption.type,")"),e.xp6(3),e.Oqu(r.orderData.deliveryOption.price),e.xp6(7),e.hij("$",r.orderData.itemsCostIncludingCharges,""),e.xp6(14),e.hij(" ",r.orderData.deliveryAddress.name," "),e.xp6(2),e.hij(" ",r.orderData.deliveryAddress.email," "),e.xp6(2),e.hij(" ",r.orderData.deliveryAddress.mobile," "),e.xp6(3),e.Q6J("innerHTML",r.getSanitizedLocationUrl(),e.oJD),e.xp6(5),e.Q6J("ngIf","Pickup Available"!=r.orderData.deliveryOption.type),e.xp6(1),e.Q6J("ngIf","Pickup Available"==r.orderData.deliveryOption.type),e.xp6(1),e.Q6J("ngIf","Pickup Available"!=r.orderData.deliveryOption.type),e.xp6(1),e.Q6J("ngIf","Pickup Available"==r.orderData.deliveryOption.type)}}const O=[{path:"",component:(()=>{var s;class l{constructor(n,o,a){this.router=n,this.adminService=o,this.sanitizer=a,this.orderData={}}ngOnInit(){}ionViewWillEnter(){this._id=this.router.url.split("/")[2],this.adminService.getCustomerOrders({_id:this._id}).subscribe(n=>{n.success&&n.data&&(this.orderData=n.data[0])},n=>{console.log(n)})}navigateToOrders(){this.router.navigate(["/orders"])}formatTimestamp(n){const o=new Date(n);return`${o.getDate()} ${o.toLocaleString("en-US",{month:"short"})} ${o.toLocaleString("en-US",{weekday:"short"})} ${o.toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`}callNumber(n){window.open(`tel:${n}`,"_system")}getSanitizedLocationUrl(){var n,o;let a=(null===(n=this.orderData)||void 0===n||null===(n=n.deliveryAddress)||void 0===n?void 0:n.LocationUrl)||"";var c,v;return a="Pickup Available"!=(null===(o=this.orderData)||void 0===o||null===(o=o.deliveryOption)||void 0===o?void 0:o.type)?null===(c=this.orderData)||void 0===c||null===(c=c.deliveryAddress)||void 0===c?void 0:c.LocationUrl:null===(v=this.orderData)||void 0===v||null===(v=v.listingData)||void 0===v?void 0:v.address,!a&&this.orderData&&this.orderData.deliveryAddress&&(a=this.orderData.deliveryAddress.LocationUrl||""),this.sanitizer.bypassSecurityTrustHtml(a.replace(/,/g,",<br>"))}redirectToGoogleMaps(){var n,o,a,c;"Pickup Available"!=(null===(n=this.orderData.deliveryOption)||void 0===n?void 0:n.type)&&null!==(o=this.orderData)&&void 0!==o&&null!==(o=o.deliveryAddress)&&void 0!==o&&o.LocationUrl?window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(null===(a=this.orderData)||void 0===a||null===(a=a.deliveryAddress)||void 0===a?void 0:a.LocationUrl)}`,"_blank"):window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(null===(c=this.orderData)||void 0===c||null===(c=c.listingData)||void 0===c?void 0:c.address)}`,"_blank")}}return(s=l).\u0275fac=function(n){return new(n||s)(e.Y36(U.F0),e.Y36(b.l),e.Y36(A.H7))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-orders-overview"]],decls:9,vars:2,consts:[[2,"box-shadow","none","padding","10px 20px","background","white",3,"translucent"],["size","9",1,"kd_center_align_items"],["name","bag-handle-outline",1,"kd_svg_size","padd_left"],[1,"kd_main_heading",2,"padding-left","15px"],["size","3",1,"kd_flex","kd_end_align",3,"click"],["name","close-outline",1,"kd_svg_size"],[3,"fullscreen",4,"ngIf"],[3,"fullscreen"],[2,"margin","15px"],[2,"font-size","12px"],[2,"margin-top","15px"],["size","10",1,"kd_col_center_align"],[1,"first_letter_styles"],[2,"font-weight","bold"],[2,"padding-left","20px","font-size","13px"],["size","2",1,"kd_flex","kd_end_align",3,"click"],["name","call-outline",1,"kd_svg_size"],[2,"margin-top","10px"],[1,"kd_flex_row_center",2,"margin","5px 0px"],[2,"border","solid 2px","border-radius","14px","padding","10px","background-color","#f7f7f7"],["class","kd_flex kd_center_align",4,"ngFor","ngForOf"],[1,"kd_flex","kd_center_align"],["size","8"],[2,"font-size","14px","color","#777"],["size","4",1,"kd_flex","kd_end_align"],[2,"font-size","14px","color","#555"],[2,"font-size","16px","font-weight","bold"],[2,"font-weight","bold","font-size","20px"],[1,"kd_flex"],["name","home-outline",1,"icon_style"],[2,"font-weight","bold","font-size","18px"],[2,"font-size","14px"],[2,"font-size","14px",3,"innerHTML"],[2,"margin","15px 0px"],[1,"kd_flex",2,"padding-bottom","5px"],["name","location-outline",1,"icon_style"],["style","font-size: 18px; font-weight: bold;",4,"ngIf"],[3,"click",4,"ngIf"],["size"," 8"],[1,"kd_flex",2,"font-size","14px","color","black","font-weight","bold"],["name","close-outline",1,"icon_style",2,"padding-right","5px","padding-left","5px"],[1,"kd_flex","kd_end_align","ion-no-padding",2,"padding-right","5px"],[2,"font-weight","bold","font-size","14px"],[2,"font-size","18px","font-weight","bold"],[3,"click"],[2,"color","#007bff","text-decoration","none"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-row")(2,"ion-col",1),e._UZ(3,"ion-icon",2),e.TgZ(4,"ion-text",3),e._uU(5,"Order Overview"),e.qZA()(),e.TgZ(6,"ion-col",4),e.NdJ("click",function(){return o.navigateToOrders()}),e._UZ(7,"ion-icon",5),e.qZA()()(),e.YNc(8,f,83,19,"ion-content",6)),2&n&&(e.Q6J("translucent",!0),e.xp6(8),e.Q6J("ngIf",null==o.orderData?null:o.orderData._id))},dependencies:[p.sg,p.O5,u.wI,u.W2,u.Gu,u.gu,u.Nd,u.yW],styles:["ion-textarea.custom-textarea[_ngcontent-%COMP%]{--color: black;padding:10px;border-radius:14px;--placeholder-color: black;--placeholder-opacity: .8;border:black;border-style:solid;border-width:1px}"]}),l})()}];let m=(()=>{var s;class l{}return(s=l).\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[U.Bz.forChild(O),U.Bz]}),l})(),h=(()=>{var s;class l{}return(s=l).\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[p.ez,i.u5,u.Pc,m]}),l})()},5565:(D,y,d)=>{d.d(y,{l:()=>A});var p=d(5861),i=d(553),u=d(5678),U=d(2436),e=d(9862),b=d(4414);let A=(()=>{var _;class Z{constructor(t,g,f,x){this.route=t,this.http=g,this.alertController=f,this.loadingController=x}getUsersCount(t){return this.http.post(i.N.baseUrl+"/admin/getUsersCount",t)}getListingsCount(t){return this.http.post(i.N.baseUrl+"/admin/getListingsCount",t)}getAllListings(t){return this.http.post(i.N.baseUrl+"/admin/getAllListings",t)}getListingBasedOnId(t){return this.http.post(i.N.baseUrl+"/admin/getListingBasedOnId",t)}getAllUsersList(t){return this.http.post(i.N.baseUrl+"/admin/getAllUsersList",t)}getUserBasedOnId(t){return this.http.post(i.N.baseUrl+"/admin/getUserBasedOnId",t)}activeDeActiveListing(t){return this.http.post(i.N.baseUrl+"/admin/activeDeActiveListing",t)}createMaker(t){return this.http.post(i.N.baseUrl+"/admin/createMaker",t)}updateKitchenImages(t){return this.http.post(i.N.baseUrl+"/admin/updateKitchenImages",t)}updateBankDetails(t){return this.http.post(i.N.baseUrl+"/admin/updateBankDetails",t)}getUserOverView(t){return this.http.post(i.N.baseUrl+"/admin/getUserOverView",t)}activeDeActiveUser(t){return this.http.post(i.N.baseUrl+"/admin/activeDeActiveUser",t)}getMakerDashboardData(t){return this.http.post(i.N.baseUrl+"/maker/getMakerDashboardData",t)}addEditListing(t){return this.http.post(i.N.baseUrl+"/maker/addEditListing",t)}deleteListing(t){return this.http.post(i.N.baseUrl+"/maker/deleteListing",t)}changeOrderStatus(t){return this.http.post(i.N.baseUrl+"/maker/changeOrderStatus",t)}toggleMakerStatus(t){return this.http.post(i.N.baseUrl+"/maker/toggleMakerStatus",t)}updateCustomerDetails(t){return this.http.post(i.N.baseUrl+"/customer/updateCustomerDetails",t)}getCustomerOrders(t){return this.http.post(i.N.baseUrl+"/customer/getCustomerOrders",t)}getAllListingsForCustomer(t){return this.http.post(i.N.baseUrl+"/auth/getAllListingsForCustomer",t)}setFavItem(t){return this.http.post(i.N.baseUrl+"/customer/setFavItem",t)}setUnFavItem(t){return this.http.post(i.N.baseUrl+"/customer/setUnFavItem",t)}getListingForUser(t){return this.http.post(i.N.baseUrl+"/auth/getListingForUser",t)}getCustomerAddress(t){return this.http.post(i.N.baseUrl+"/customer/getCustomerAddress",t)}deleteTempOrder(t){return this.http.post(i.N.baseUrl+"/customer/deleteTempOrder",t)}addCustomerAddress(t){return this.http.post(i.N.baseUrl+"/customer/addCustomerAddress",t)}setDefaultAddress(t){return this.http.post(i.N.baseUrl+"/customer/setDefaultAddress",t)}deleteAddress(t){return this.http.post(i.N.baseUrl+"/customer/deleteAddress",t)}addToCart(t){return this.http.post(i.N.baseUrl+"/customer/addToCart",t)}getCustomerOrderSummary(t){return this.http.post(i.N.baseUrl+"/customer/getCustomerOrderSummary",t)}placeOrder(t){return this.http.post(i.N.baseUrl+"/customer/placeOrder",t)}createOrderInRazorPay(t){return this.http.post(i.N.baseUrl+"/customer/createOrderInRazorPay",t)}payWithRazorpay(t,g,f){var x=this;return(0,p.Z)(function*(){return new Promise(function(){var O=(0,p.Z)(function*(m,h){const s={key:i.N.razorpayKey,amount:100*g,currency:"INR",name:"Vdream Innovations (OPC) private limited",description:"Vdream Innovations",order_id:t,handler:(r=(0,p.Z)(function*(n){try{let a={...yield x.verifyPayment({verify:n}),...n};console.log({obj:a}),m(a)}catch(o){console.log({error:o}),h(o)}}),function(o){return r.apply(this,arguments)}),prefill:{name:"test",email:"test",contact:"test"},theme:{color:"#3399cc"},modal:{ondismiss:()=>{h({message:"Your payment has been cancelled."})}},retry:{enabled:!1}},l=new Razorpay(s);var r;yield l.on("payment.failed",function(){var r=(0,p.Z)(function*(n){let o=n.error||n||{};o.message=o.message||o.description,l.close(),console.log("closed"),h(o)});return function(n){return r.apply(this,arguments)}}()),yield l.open()});return function(m,h){return O.apply(this,arguments)}}())})()}verifyPayment(t){return this.http.post(i.N.baseUrl+"/customer/verifyPaymentDetails",t)}savePaymentFailedDetails(t){return this.http.post(i.N.baseUrl+"/customer/savePaymentFailedDetails",t)}presentDeleteConfirmation(t,g,f){var x=this;return(0,p.Z)(function*(){return new Promise(function(){var O=(0,p.Z)(function*(m){yield(yield x.alertController.create({header:t,message:g,cssClass:f,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{m(!1)}},{text:"OK",cssClass:"primary",handler:()=>{m(!0)}}]})).present()});return function(m){return O.apply(this,arguments)}}())})()}presentLoading(){var t=this;return(0,p.Z)(function*(){const g=yield t.loadingController.create({message:"Loading...",translucent:!0,backdropDismiss:!1});return yield g.present(),g})()}}return(_=Z).\u0275fac=function(t){return new(t||_)(u.LFG(U.F0),u.LFG(e.eN),u.LFG(b.Br),u.LFG(b.HT))},_.\u0275prov=u.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),Z})()}}]);