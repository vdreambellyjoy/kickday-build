"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2102],{2102:(y,D,l)=>{l.r(D),l.d(D,{CustomerOrderDetailsPageModule:()=>C});var p=l(6814),o=l(95),d=l(9004),m=l(2436),e=l(5678),U=l(4414),v=l(5565),c=l(6593);function b(i,s){if(1&i&&(e.TgZ(0,"ion-row",12)(1,"ion-col",31)(2,"ion-text",35),e._uU(3),e.qZA()(),e.TgZ(4,"ion-col",33)(5,"ion-text",41),e._uU(6),e._UZ(7,"ion-icon",42),e._uU(8),e.qZA()(),e.TgZ(9,"ion-col",43)(10,"ion-text",44),e._uU(11),e.qZA()()()),2&i){const a=s.$implicit;e.xp6(3),e.Oqu(a.name),e.xp6(3),e.hij("\u20b9 ",a.price," "),e.xp6(2),e.hij(" ",a.count,""),e.xp6(3),e.hij(" = \u20b9 ",a.individualItemCost,"")}}function Z(i,s){1&i&&(e.TgZ(0,"ion-row")(1,"ion-col",37),e._UZ(2,"ion-icon",45),e.TgZ(3,"ion-text",46),e._uU(4,"Delivery ( Pickup )"),e.qZA()()())}function r(i,s){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-text",47),e._uU(3),e.ALo(4,"date"),e.qZA()()()),2&i){const a=e.oxw();e.xp6(3),e.hij("Pickup on ",e.xi3(4,1,null==a.orderData[0]||null==a.orderData[0].listingData?null:a.orderData[0].listingData.orderDeliveredOn,"dd MMMM EEE"),"")}}function _(i,s){1&i&&(e.TgZ(0,"ion-row")(1,"ion-col",37),e._UZ(2,"ion-icon",48),e.TgZ(3,"ion-text",49),e._uU(4,"Delivery Address"),e.qZA()()())}function h(i,s){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-text",47),e._uU(3),e._UZ(4,"br"),e._uU(5),e._UZ(6,"br"),e._uU(7),e._UZ(8,"br")(9,"br")(10,"ion-text",50),e.qZA()()()),2&i){const a=e.oxw();e.xp6(3),e.hij(" ",null==a.orderData[0]||null==a.orderData[0].deliveryAddress?null:a.orderData[0].deliveryAddress.name," "),e.xp6(2),e.hij(" ",null==a.orderData[0]||null==a.orderData[0].deliveryAddress?null:a.orderData[0].deliveryAddress.email," "),e.xp6(2),e.hij(" ",null==a.orderData[0]||null==a.orderData[0].deliveryAddress?null:a.orderData[0].deliveryAddress.mobile," "),e.xp6(3),e.Q6J("innerHTML",a.getSanitizedLocationUrl(),e.oJD)}}function x(i,s){1&i&&(e.TgZ(0,"ion-text",51),e._uU(1,"Delivery Location"),e.qZA())}function O(i,s){1&i&&(e.TgZ(0,"ion-text",51),e._uU(1,"Pickup Location"),e.qZA())}const A=[{path:"",component:(()=>{var i;class s{constructor(n,t,u,g){this.router=n,this.navCtrl=t,this.adminService=u,this.sanitizer=g,this._id="",this.userData={},this.orderData={},this.confirmedDisabled=!1,this.dispatchedDisabled=!1,this.deliveredDisabled=!1,this.cancelledDisabled=!1}ngOnInit(){}ionViewWillEnter(){this._id=this.router.url.split("/")[2],this.adminService.getCustomerOrders({_id:this._id}).subscribe(t=>{t.success&&t.data&&(this.orderData=t.data,console.log(this.orderData,"order Dataaaa"),this.updateDisabledStatus())},t=>{console.log(t)});let n=localStorage.getItem("userData");this.userData=JSON.parse(n),console.log(this._id)}goToBack(){this.navCtrl.back()}changeStatus(n){console.log(n),"Dispatched"===n?this.confirmedDisabled=!0:"Delivered"===n?(this.confirmedDisabled=!0,this.dispatchedDisabled=!0,this.cancelledDisabled=!0):"Cancelled"===n&&(this.confirmedDisabled=!0,this.dispatchedDisabled=!0,this.deliveredDisabled=!0),this.adminService.changeOrderStatus({status:n,_id:this._id}).subscribe(t=>{},t=>{console.log(t)})}formatTimestamp(n){const t=new Date(n);return`${t.getDate()} ${t.toLocaleString("en-US",{month:"short"})} ${t.toLocaleString("en-US",{weekday:"short"})} ${t.toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`}callNumber(n){window.open(`tel:${n}`,"_system")}getSanitizedLocationUrl(){var n,t;let u=(null===(n=this.orderData[0])||void 0===n||null===(n=n.deliveryAddress)||void 0===n?void 0:n.LocationUrl)||"";var g;return!u&&this.orderData[0]&&null!==(t=this.orderData[0])&&void 0!==t&&t.deliveryAddress&&(u=(null===(g=this.orderData[0])||void 0===g?void 0:g.deliveryAddress.LocationUrl)||""),this.sanitizer.bypassSecurityTrustHtml(u.replace(/,/g,",<br>"))}updateDisabledStatus(){"Dispatched"===this.orderData.status?this.confirmedDisabled=!0:"Delivered"===this.orderData.status?(this.confirmedDisabled=!0,this.dispatchedDisabled=!0,this.cancelledDisabled=!0):"Cancelled"===this.orderData.status&&(this.confirmedDisabled=!0,this.dispatchedDisabled=!0,this.deliveredDisabled=!0)}}return(i=s).\u0275fac=function(n){return new(n||i)(e.Y36(m.F0),e.Y36(U.SH),e.Y36(v.l),e.Y36(c.H7))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-customer-order-details"]],decls:126,vars:22,consts:[[2,"box-shadow","none",3,"translucent"],[2,"margin","10px"],[2,"display","flex","justify-content","start","align-items","center",3,"click"],["name","arrow-back-outline",1,"kd_back_button"],[2,"padding-left","15px"],[3,"fullscreen"],[2,"margin","15px"],[2,"margin-bottom","10px","padding","5px"],[2,"font-size","12px","font-weight","bold"],[1,"scroll_width"],[2,"overflow-x","auto","white-space","nowrap","display","flex","margin","5px"],[2,"border","solid 2px","border-radius","14px","padding","10px 0px","margin-right","15px",3,"disabled","click"],[1,"kd_flex","kd_center_align"],["name","home",1,"icon_style",2,"padding-right","5px","color","blue"],[2,"text-align","center"],[1,"kd_font_size_12"],["name","home",1,"icon_style",2,"padding-right","5px","color","#e6cc00"],["name","home",1,"icon_style",2,"padding-right","5px","color","green"],[2,"border","solid 2px","border-radius","14px","padding","10px 0px",3,"disabled","click"],["name","home",1,"icon_style",2,"padding-right","5px","color","red"],[2,"margin-top","10px"],["size","10",1,"kd_flex"],[1,"first_letter_styles"],[2,"font-weight","bold"],[2,"padding-left","20px"],["size","2",1,"kd_flex","kd_center_align",3,"click"],["name","call-outline",1,"kd_svg_size"],[2,"margin","10px 0px"],[1,"kd_flex_row_center",2,"margin","5px 0px"],[2,"border","solid 2px","border-radius","14px","padding","10px","background-color","#f7f7f7"],["class","kd_flex kd_center_align",4,"ngFor","ngForOf"],["size","8"],[2,"font-size","14px","color","#777"],["size","4",1,"kd_flex","kd_end_align"],[2,"font-size","14px","color","#555"],[2,"font-size","16px","font-weight","bold"],[4,"ngIf"],[1,"kd_center_align_items"],["name","location-outline",1,"kd_back_button"],["style","font-size: 18px; font-weight: bold;",4,"ngIf"],["href","orderData[0]?.deliveryAddress?.LocationUrl",2,"color","#007bff","text-decoration","none"],[1,"kd_flex",2,"font-size","14px","color","black","font-weight","bold"],["name","close-outline",1,"icon_style",2,"padding-right","5px","padding-left","5px"],[1,"kd_flex","kd_end_align","ion-no-padding",2,"padding-right","5px"],[2,"font-weight","bold","font-size","14px"],["name","bicycle-outline",1,"kd_back_button"],[2,"padding-left","10px"],[2,"font-size","14px"],["name","home",1,"kd_back_button"],[2,"padding-left","10px","font-weight","bold"],[2,"font-size","14px",3,"innerHTML"],[2,"font-size","18px","font-weight","bold"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-row",1)(3,"ion-col",2),e.NdJ("click",function(){return t.goToBack()}),e._UZ(4,"ion-icon",3),e.TgZ(5,"ion-text",4),e._uU(6,"Order Overview"),e.qZA()()()()(),e.TgZ(7,"ion-content",5)(8,"div",6)(9,"div",7)(10,"ion-text"),e._uU(11),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"ion-text",8),e._uU(14),e.qZA()(),e.TgZ(15,"ion-toolbar",9)(16,"div",10)(17,"button",11),e.NdJ("click",function(){return t.changeStatus("confirmed")}),e.TgZ(18,"ion-row")(19,"ion-col",12),e._UZ(20,"ion-icon",13),e.TgZ(21,"ion-text",8),e._uU(22,"Order confirmed"),e.qZA()()(),e.TgZ(23,"ion-row")(24,"ion-col",14)(25,"ion-text",15),e._uU(26,"Mark as "),e._UZ(27,"br"),e._uU(28," Order confirmed"),e.qZA()()()(),e.TgZ(29,"button",11),e.NdJ("click",function(){return t.changeStatus("Dispatched")}),e.TgZ(30,"ion-row")(31,"ion-col",12),e._UZ(32,"ion-icon",16),e.TgZ(33,"ion-text",8),e._uU(34,"Order Dispatched"),e.qZA()()(),e.TgZ(35,"ion-row")(36,"ion-col",14)(37,"ion-text",15),e._uU(38,"Mark as "),e._UZ(39,"br"),e._uU(40," Order Dispatched"),e.qZA()()()(),e.TgZ(41,"button",11),e.NdJ("click",function(){return t.changeStatus("Delivered")}),e.TgZ(42,"ion-row")(43,"ion-col",12),e._UZ(44,"ion-icon",17),e.TgZ(45,"ion-text",8),e._uU(46,"Order Delivered"),e.qZA()()(),e.TgZ(47,"ion-row")(48,"ion-col",14)(49,"ion-text",15),e._uU(50,"Mark as "),e._UZ(51,"br"),e._uU(52," Order Delivered"),e.qZA()()()(),e.TgZ(53,"button",18),e.NdJ("click",function(){return t.changeStatus("Cancelled")}),e.TgZ(54,"ion-row")(55,"ion-col",12),e._UZ(56,"ion-icon",19),e.TgZ(57,"ion-text",8),e._uU(58,"Order Cancelled"),e.qZA()()(),e.TgZ(59,"ion-row")(60,"ion-col",14)(61,"ion-text",15),e._uU(62,"Mark as "),e._UZ(63,"br"),e._uU(64," Order Cancelled"),e.qZA()()()()()(),e.TgZ(65,"ion-row",20)(66,"ion-col",21)(67,"div",22)(68,"ion-text",23),e._uU(69,"R"),e.qZA()(),e.TgZ(70,"ion-text",24)(71,"span"),e._uU(72),e.qZA(),e._UZ(73,"br"),e.TgZ(74,"span"),e._uU(75),e.qZA()()(),e.TgZ(76,"ion-col",25),e.NdJ("click",function(){return t.callNumber(null==t.orderData[0]||null==t.orderData[0].deliveryAddress?null:t.orderData[0].deliveryAddress.mobile)}),e._UZ(77,"ion-icon",26),e.qZA()(),e.TgZ(78,"ion-row")(79,"ion-col",27)(80,"ion-text",23),e._uU(81),e.qZA()()(),e.TgZ(82,"ion-row")(83,"ion-col",28)(84,"div",29),e.YNc(85,b,12,4,"ion-row",30),e.TgZ(86,"ion-row",12)(87,"ion-col",31)(88,"ion-text",32),e._uU(89),e.qZA()(),e.TgZ(90,"ion-col",33)(91,"ion-text",34),e._uU(92),e.qZA()()(),e.TgZ(93,"ion-row",12)(94,"ion-col",31)(95,"ion-text",32),e._uU(96,"GST"),e.qZA()(),e.TgZ(97,"ion-col",33)(98,"ion-text",34),e._uU(99,"\u20b9 0"),e.qZA()()(),e.TgZ(100,"ion-row",12)(101,"ion-col",31)(102,"ion-text",35),e._uU(103,"Total"),e.qZA()(),e.TgZ(104,"ion-col",33)(105,"ion-text",35),e._uU(106),e.qZA()()()()()(),e.TgZ(107,"ion-row")(108,"ion-col")(109,"ion-text",23),e._uU(110,"Delivery details"),e.qZA()()(),e.YNc(111,Z,5,0,"ion-row",36)(112,r,5,4,"ion-row",36)(113,_,5,0,"ion-row",36)(114,h,11,4,"ion-row",36),e.TgZ(115,"ion-row")(116,"ion-col",37),e._UZ(117,"ion-icon",38),e.YNc(118,x,2,0,"ion-text",39)(119,O,2,0,"ion-text",39),e._UZ(120,"br"),e.qZA()(),e.TgZ(121,"ion-row")(122,"ion-col")(123,"ion-text")(124,"a",40),e._uU(125),e.qZA()()()()()()),2&n&&(e.Q6J("translucent",!0),e.xp6(7),e.Q6J("fullscreen",!0),e.xp6(4),e.hij("Order ",null==t.orderData[0]?null:t.orderData[0].ID,""),e.xp6(3),e.hij("Received on: ",t.formatTimestamp(null==t.orderData[0]?null:t.orderData[0].timeStamp),""),e.xp6(3),e.Q6J("disabled",t.confirmedDisabled),e.xp6(12),e.Q6J("disabled",t.dispatchedDisabled),e.xp6(12),e.Q6J("disabled",t.deliveredDisabled),e.xp6(12),e.Q6J("disabled",t.cancelledDisabled),e.xp6(19),e.Oqu(null==t.orderData[0]||null==t.orderData[0].deliveryAddress?null:t.orderData[0].deliveryAddress.name),e.xp6(3),e.Oqu(null==t.orderData[0]||null==t.orderData[0].deliveryAddress?null:t.orderData[0].deliveryAddress.address),e.xp6(6),e.Oqu(null==t.orderData[0]||null==t.orderData[0].listingData?null:t.orderData[0].listingData.label),e.xp6(4),e.Q6J("ngForOf",null==t.orderData[0]?null:t.orderData[0].orderedItems),e.xp6(4),e.hij("Delivery (",null==t.orderData[0]?null:t.orderData[0].deliveryOption.type,")"),e.xp6(3),e.Oqu(null==t.orderData[0]?null:t.orderData[0].deliveryOption.price),e.xp6(14),e.hij("\u20b9 ",null==t.orderData[0]?null:t.orderData[0].totalPrice,""),e.xp6(5),e.Q6J("ngIf","Pickup Available"==(null==t.orderData[0]?null:t.orderData[0].deliveryOption.type)),e.xp6(1),e.Q6J("ngIf","Pickup Available"==(null==t.orderData[0]?null:t.orderData[0].deliveryOption.type)),e.xp6(1),e.Q6J("ngIf","Pickup Available"!=(null==t.orderData[0]?null:t.orderData[0].deliveryOption.type)),e.xp6(1),e.Q6J("ngIf","Pickup Available"!=(null==t.orderData[0]?null:t.orderData[0].deliveryOption.type)),e.xp6(4),e.Q6J("ngIf","Pickup Available"!=(null==t.orderData[0]||null==t.orderData[0].deliveryOption?null:t.orderData[0].deliveryOption.type)),e.xp6(1),e.Q6J("ngIf","Pickup Available"==(null==t.orderData[0]||null==t.orderData[0].deliveryOption?null:t.orderData[0].deliveryOption.type)),e.xp6(6),e.Oqu(null==t.orderData[0]||null==t.orderData[0].deliveryAddress?null:t.orderData[0].deliveryAddress.LocationUrl))},dependencies:[p.sg,p.O5,d.wI,d.W2,d.Gu,d.gu,d.Nd,d.yW,d.sr,p.uU],styles:[".input_selection[_ngcontent-%COMP%]{border:solid 1px black;border-radius:14px;min-height:75px;box-shadow:none;--padding-start: 10px;margin-top:8px}ion-textarea.custom-textarea[_ngcontent-%COMP%]{--color: black;padding:10px;border-radius:14px;--placeholder-color: black;--placeholder-opacity: .8;border:black;border-style:solid;border-width:1px}.scroll_width[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:0px}.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}button[disabled][_ngcontent-%COMP%]{cursor:no-drop;opacity:.3}button[_ngcontent-%COMP%]{background-color:#fff}"]}),s})()}];let T=(()=>{var i;class s{}return(i=s).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.Bz.forChild(A),m.Bz]}),s})(),C=(()=>{var i;class s{}return(i=s).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,o.u5,d.Pc,T]}),s})()},5565:(y,D,l)=>{l.d(D,{l:()=>v});var p=l(5861),o=l(553),d=l(5678),m=l(2436),e=l(9862),U=l(4414);let v=(()=>{var c;class b{constructor(r,_,h){this.route=r,this.http=_,this.alertController=h}getUsersCount(r){return this.http.post(o.N.baseUrl+"/admin/getUsersCount",r)}getListingsCount(r){return this.http.post(o.N.baseUrl+"/admin/getListingsCount",r)}getAllListings(r){return this.http.post(o.N.baseUrl+"/admin/getAllListings",r)}getListingBasedOnId(r){return this.http.post(o.N.baseUrl+"/admin/getListingBasedOnId",r)}getAllUsersList(r){return this.http.post(o.N.baseUrl+"/admin/getAllUsersList",r)}getUserBasedOnId(r){return this.http.post(o.N.baseUrl+"/admin/getUserBasedOnId",r)}activeDeActiveListing(r){return this.http.post(o.N.baseUrl+"/admin/activeDeActiveListing",r)}createMaker(r){return this.http.post(o.N.baseUrl+"/admin/createMaker",r)}updateKitchenImages(r){return this.http.post(o.N.baseUrl+"/admin/updateKitchenImages",r)}updateBankDetails(r){return this.http.post(o.N.baseUrl+"/admin/updateBankDetails",r)}getUserOverView(r){return this.http.post(o.N.baseUrl+"/admin/getUserOverView",r)}activeDeActiveUser(r){return this.http.post(o.N.baseUrl+"/admin/activeDeActiveUser",r)}getMakerDashboardData(r){return this.http.post(o.N.baseUrl+"/maker/getMakerDashboardData",r)}addEditListing(r){return this.http.post(o.N.baseUrl+"/maker/addEditListing",r)}deleteListing(r){return this.http.post(o.N.baseUrl+"/maker/deleteListing",r)}changeOrderStatus(r){return this.http.post(o.N.baseUrl+"/maker/changeOrderStatus",r)}updateCustomerDetails(r){return this.http.post(o.N.baseUrl+"/customer/updateCustomerDetails",r)}getCustomerOrders(r){return this.http.post(o.N.baseUrl+"/customer/getCustomerOrders",r)}getAllListingsForCustomer(r){return this.http.post(o.N.baseUrl+"/auth/getAllListingsForCustomer",r)}setFavItem(r){return this.http.post(o.N.baseUrl+"/customer/setFavItem",r)}setUnFavItem(r){return this.http.post(o.N.baseUrl+"/customer/setUnFavItem",r)}getListingForUser(r){return this.http.post(o.N.baseUrl+"/auth/getListingForUser",r)}getCustomerAddress(r){return this.http.post(o.N.baseUrl+"/customer/getCustomerAddress",r)}deleteTempOrder(r){return this.http.post(o.N.baseUrl+"/customer/deleteTempOrder",r)}addCustomerAddress(r){return this.http.post(o.N.baseUrl+"/customer/addCustomerAddress",r)}setDefaultAddress(r){return this.http.post(o.N.baseUrl+"/customer/setDefaultAddress",r)}deleteAddress(r){return this.http.post(o.N.baseUrl+"/customer/deleteAddress",r)}addToCart(r){return this.http.post(o.N.baseUrl+"/customer/addToCart",r)}getCustomerOrderSummary(r){return this.http.post(o.N.baseUrl+"/customer/getCustomerOrderSummary",r)}placeOrder(r){return this.http.post(o.N.baseUrl+"/customer/placeOrder",r)}presentDeleteConfirmation(r,_,h){var x=this;return(0,p.Z)(function*(){return new Promise(function(){var O=(0,p.Z)(function*(f){yield(yield x.alertController.create({header:r,message:_,cssClass:h,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{f(!1)}},{text:"OK",cssClass:"primary",handler:()=>{f(!0)}}]})).present()});return function(f){return O.apply(this,arguments)}}())})()}}return(c=b).\u0275fac=function(r){return new(r||c)(d.LFG(m.F0),d.LFG(e.eN),d.LFG(U.Br))},c.\u0275prov=d.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),b})()}}]);