"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2102],{2102:(A,f,l)=>{l.r(f),l.d(f,{CustomerOrderDetailsPageModule:()=>k});var p=l(6814),n=l(95),u=l(9004),h=l(2436),v=l(5861),e=l(5678),Z=l(4414),g=l(5565),U=l(6593);function x(o,s){if(1&o&&(e.TgZ(0,"ion-row",12)(1,"ion-col",31)(2,"ion-text",35),e._uU(3),e.qZA()(),e.TgZ(4,"ion-col",33)(5,"ion-text",41),e._uU(6),e._UZ(7,"ion-icon",42),e._uU(8),e.qZA()(),e.TgZ(9,"ion-col",43)(10,"ion-text",44),e._uU(11),e.qZA()()()),2&o){const a=s.$implicit;e.xp6(3),e.Oqu(a.name),e.xp6(3),e.hij("\u20b9 ",a.price," "),e.xp6(2),e.hij(" ",a.count,""),e.xp6(3),e.hij(" = \u20b9 ",a.individualItemCost,"")}}function t(o,s){1&o&&(e.TgZ(0,"ion-row")(1,"ion-col",37),e._UZ(2,"ion-icon",45),e.TgZ(3,"ion-text",46),e._uU(4,"Delivery ( Pickup )"),e.qZA()()())}function m(o,s){if(1&o&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-text",47),e._uU(3),e.ALo(4,"date"),e.qZA()()()),2&o){const a=e.oxw();e.xp6(3),e.hij("Pickup on ",e.xi3(4,1,null==a.orderData[0]||null==a.orderData[0].listingData?null:a.orderData[0].listingData.orderDeliveredOn,"dd MMMM EEE"),"")}}function _(o,s){1&o&&(e.TgZ(0,"ion-row")(1,"ion-col",37),e._UZ(2,"ion-icon",48),e.TgZ(3,"ion-text",49),e._uU(4,"Delivery Address"),e.qZA()()())}function D(o,s){if(1&o&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-text",47),e._uU(3),e._UZ(4,"br"),e._uU(5),e._UZ(6,"br"),e._uU(7),e._UZ(8,"br")(9,"br")(10,"ion-text",50),e.qZA()()()),2&o){const a=e.oxw();e.xp6(3),e.hij(" ",null==a.orderData[0]||null==a.orderData[0].deliveryAddress?null:a.orderData[0].deliveryAddress.name," "),e.xp6(2),e.hij(" ",null==a.orderData[0]||null==a.orderData[0].deliveryAddress?null:a.orderData[0].deliveryAddress.email," "),e.xp6(2),e.hij(" ",null==a.orderData[0]||null==a.orderData[0].deliveryAddress?null:a.orderData[0].deliveryAddress.mobile," "),e.xp6(3),e.Q6J("innerHTML",a.getSanitizedLocationUrl(),e.oJD)}}function O(o,s){1&o&&(e.TgZ(0,"ion-text",51),e._uU(1,"Delivery Location"),e.qZA())}function b(o,s){1&o&&(e.TgZ(0,"ion-text",51),e._uU(1,"Pickup Location"),e.qZA())}const T=[{path:"",component:(()=>{var o;class s{constructor(i,r,d,c){this.router=i,this.navCtrl=r,this.adminService=d,this.sanitizer=c,this._id="",this.userData={},this.orderData={},this.confirmedDisabled=!1,this.dispatchedDisabled=!1,this.deliveredDisabled=!1,this.cancelledDisabled=!1}ngOnInit(){}ionViewWillEnter(){var i=this;return(0,v.Z)(function*(){const r=yield i.adminService.presentLoading();i._id=i.router.url.split("/")[2],i.adminService.getCustomerOrders({_id:i._id}).subscribe(c=>{c.success&&c.data&&(i.orderData=c.data,console.log(i.orderData,"order Dataaaa"),i.updateDisabledStatus()),r.dismiss()},c=>{r.dismiss(),console.log(c)});let d=localStorage.getItem("userData");i.userData=JSON.parse(d),console.log(i._id)})()}goToBack(){this.navCtrl.back()}changeStatus(i){console.log(i),"Dispatched"===i?this.confirmedDisabled=!0:"Delivered"===i?(this.confirmedDisabled=!0,this.dispatchedDisabled=!0,this.cancelledDisabled=!0):"Cancelled"===i&&(this.confirmedDisabled=!0,this.dispatchedDisabled=!0,this.deliveredDisabled=!0),this.adminService.changeOrderStatus({status:i,_id:this._id}).subscribe(r=>{},r=>{console.log(r)})}formatTimestamp(i){const r=new Date(i);return`${r.getDate()} ${r.toLocaleString("en-US",{month:"short"})} ${r.toLocaleString("en-US",{weekday:"short"})} ${r.toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`}callNumber(i){window.open(`tel:${i}`,"_system")}getSanitizedLocationUrl(){var i,r;let d=(null===(i=this.orderData[0])||void 0===i||null===(i=i.deliveryAddress)||void 0===i?void 0:i.LocationUrl)||"";var c;return!d&&this.orderData[0]&&null!==(r=this.orderData[0])&&void 0!==r&&r.deliveryAddress&&(d=(null===(c=this.orderData[0])||void 0===c?void 0:c.deliveryAddress.LocationUrl)||""),this.sanitizer.bypassSecurityTrustHtml(d.replace(/,/g,",<br>"))}updateDisabledStatus(){"Dispatched"===this.orderData.status?this.confirmedDisabled=!0:"Delivered"===this.orderData.status?(this.confirmedDisabled=!0,this.dispatchedDisabled=!0,this.cancelledDisabled=!0):"Cancelled"===this.orderData.status&&(this.confirmedDisabled=!0,this.dispatchedDisabled=!0,this.deliveredDisabled=!0)}}return(o=s).\u0275fac=function(i){return new(i||o)(e.Y36(h.F0),e.Y36(Z.SH),e.Y36(g.l),e.Y36(U.H7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-customer-order-details"]],decls:126,vars:23,consts:[[2,"box-shadow","none",3,"translucent"],[2,"margin","10px"],[2,"display","flex","justify-content","start","align-items","center",3,"click"],["name","arrow-back-outline",1,"kd_back_button"],[2,"padding-left","15px"],[3,"fullscreen"],[2,"margin","15px"],[2,"margin-bottom","10px","padding","5px"],[2,"font-size","12px","font-weight","bold"],[1,"scroll_width"],[2,"overflow-x","auto","white-space","nowrap","display","flex","margin","5px"],[2,"border","solid 2px","border-radius","14px","padding","10px 0px","margin-right","15px",3,"disabled","click"],[1,"kd_flex","kd_center_align"],["name","home",1,"icon_style",2,"padding-right","5px","color","blue"],[2,"text-align","center"],[1,"kd_font_size_12"],["name","home",1,"icon_style",2,"padding-right","5px","color","#e6cc00"],["name","home",1,"icon_style",2,"padding-right","5px","color","green"],[2,"border","solid 2px","border-radius","14px","padding","10px 0px",3,"disabled","click"],["name","home",1,"icon_style",2,"padding-right","5px","color","red"],[2,"margin-top","10px"],["size","10",1,"kd_flex"],[1,"first_letter_styles"],[2,"font-weight","bold"],[2,"padding-left","20px"],["size","2",1,"kd_flex","kd_center_align",3,"click"],["name","call-outline",1,"kd_svg_size"],[2,"margin","10px 0px"],[1,"kd_flex_row_center",2,"margin","5px 0px"],[2,"border","solid 2px","border-radius","14px","padding","10px","background-color","#f7f7f7"],["class","kd_flex kd_center_align",4,"ngFor","ngForOf"],["size","8"],[2,"font-size","14px","color","#777"],["size","4",1,"kd_flex","kd_end_align"],[2,"font-size","14px","color","#555"],[2,"font-size","16px","font-weight","bold"],[4,"ngIf"],[1,"kd_center_align_items"],["name","location-outline",1,"kd_back_button"],["style","font-size: 18px; font-weight: bold;",4,"ngIf"],["href","orderData[0]?.deliveryAddress?.LocationUrl",2,"color","#007bff","text-decoration","none"],[1,"kd_flex",2,"font-size","14px","color","black","font-weight","bold"],["name","close-outline",1,"icon_style",2,"padding-right","5px","padding-left","5px"],[1,"kd_flex","kd_end_align","ion-no-padding",2,"padding-right","5px"],[2,"font-weight","bold","font-size","14px"],["name","bicycle-outline",1,"kd_back_button"],[2,"padding-left","10px"],[2,"font-size","14px"],["name","home",1,"kd_back_button"],[2,"padding-left","10px","font-weight","bold"],[2,"font-size","14px",3,"innerHTML"],[2,"font-size","18px","font-weight","bold"]],template:function(i,r){1&i&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-row",1)(3,"ion-col",2),e.NdJ("click",function(){return r.goToBack()}),e._UZ(4,"ion-icon",3),e.TgZ(5,"ion-text",4),e._uU(6,"Order Overview"),e.qZA()()()()(),e.TgZ(7,"ion-content",5)(8,"div",6)(9,"div",7)(10,"ion-text"),e._uU(11),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"ion-text",8),e._uU(14),e.qZA()(),e.TgZ(15,"ion-toolbar",9)(16,"div",10)(17,"button",11),e.NdJ("click",function(){return r.changeStatus("confirmed")}),e.TgZ(18,"ion-row")(19,"ion-col",12),e._UZ(20,"ion-icon",13),e.TgZ(21,"ion-text",8),e._uU(22,"Order confirmed"),e.qZA()()(),e.TgZ(23,"ion-row")(24,"ion-col",14)(25,"ion-text",15),e._uU(26,"Mark as "),e._UZ(27,"br"),e._uU(28," Order confirmed"),e.qZA()()()(),e.TgZ(29,"button",11),e.NdJ("click",function(){return r.changeStatus("Dispatched")}),e.TgZ(30,"ion-row")(31,"ion-col",12),e._UZ(32,"ion-icon",16),e.TgZ(33,"ion-text",8),e._uU(34,"Order Dispatched"),e.qZA()()(),e.TgZ(35,"ion-row")(36,"ion-col",14)(37,"ion-text",15),e._uU(38,"Mark as "),e._UZ(39,"br"),e._uU(40," Order Dispatched"),e.qZA()()()(),e.TgZ(41,"button",11),e.NdJ("click",function(){return r.changeStatus("Delivered")}),e.TgZ(42,"ion-row")(43,"ion-col",12),e._UZ(44,"ion-icon",17),e.TgZ(45,"ion-text",8),e._uU(46,"Order Delivered"),e.qZA()()(),e.TgZ(47,"ion-row")(48,"ion-col",14)(49,"ion-text",15),e._uU(50,"Mark as "),e._UZ(51,"br"),e._uU(52," Order Delivered"),e.qZA()()()(),e.TgZ(53,"button",18),e.NdJ("click",function(){return r.changeStatus("Cancelled")}),e.TgZ(54,"ion-row")(55,"ion-col",12),e._UZ(56,"ion-icon",19),e.TgZ(57,"ion-text",8),e._uU(58,"Order Cancelled"),e.qZA()()(),e.TgZ(59,"ion-row")(60,"ion-col",14)(61,"ion-text",15),e._uU(62,"Mark as "),e._UZ(63,"br"),e._uU(64," Order Cancelled"),e.qZA()()()()()(),e.TgZ(65,"ion-row",20)(66,"ion-col",21)(67,"div",22)(68,"ion-text",23),e._uU(69,"R"),e.qZA()(),e.TgZ(70,"ion-text",24)(71,"span"),e._uU(72),e.qZA(),e._UZ(73,"br"),e.TgZ(74,"span"),e._uU(75),e.qZA()()(),e.TgZ(76,"ion-col",25),e.NdJ("click",function(){return r.callNumber(null==r.orderData[0]||null==r.orderData[0].deliveryAddress?null:r.orderData[0].deliveryAddress.mobile)}),e._UZ(77,"ion-icon",26),e.qZA()(),e.TgZ(78,"ion-row")(79,"ion-col",27)(80,"ion-text",23),e._uU(81),e.qZA()()(),e.TgZ(82,"ion-row")(83,"ion-col",28)(84,"div",29),e.YNc(85,x,12,4,"ion-row",30),e.TgZ(86,"ion-row",12)(87,"ion-col",31)(88,"ion-text",32),e._uU(89,"GST"),e.qZA()(),e.TgZ(90,"ion-col",33)(91,"ion-text",34),e._uU(92),e.qZA()()(),e.TgZ(93,"ion-row",12)(94,"ion-col",31)(95,"ion-text",32),e._uU(96),e.qZA()(),e.TgZ(97,"ion-col",33)(98,"ion-text",34),e._uU(99),e.qZA()()(),e.TgZ(100,"ion-row",12)(101,"ion-col",31)(102,"ion-text",35),e._uU(103,"Total"),e.qZA()(),e.TgZ(104,"ion-col",33)(105,"ion-text",35),e._uU(106),e.qZA()()()()()(),e.TgZ(107,"ion-row")(108,"ion-col")(109,"ion-text",23),e._uU(110,"Delivery details"),e.qZA()()(),e.YNc(111,t,5,0,"ion-row",36)(112,m,5,4,"ion-row",36)(113,_,5,0,"ion-row",36)(114,D,11,4,"ion-row",36),e.TgZ(115,"ion-row")(116,"ion-col",37),e._UZ(117,"ion-icon",38),e.YNc(118,O,2,0,"ion-text",39)(119,b,2,0,"ion-text",39),e._UZ(120,"br"),e.qZA()(),e.TgZ(121,"ion-row")(122,"ion-col")(123,"ion-text")(124,"a",40),e._uU(125),e.qZA()()()()()()),2&i&&(e.Q6J("translucent",!0),e.xp6(7),e.Q6J("fullscreen",!0),e.xp6(4),e.hij("Order ",null==r.orderData[0]?null:r.orderData[0].ID,""),e.xp6(3),e.hij("Received on: ",r.formatTimestamp(null==r.orderData[0]?null:r.orderData[0].timeStamp),""),e.xp6(3),e.Q6J("disabled",r.confirmedDisabled),e.xp6(12),e.Q6J("disabled",r.dispatchedDisabled),e.xp6(12),e.Q6J("disabled",r.deliveredDisabled),e.xp6(12),e.Q6J("disabled",r.cancelledDisabled),e.xp6(19),e.Oqu(null==r.orderData[0]||null==r.orderData[0].deliveryAddress?null:r.orderData[0].deliveryAddress.name),e.xp6(3),e.Oqu(null==r.orderData[0]||null==r.orderData[0].deliveryAddress?null:r.orderData[0].deliveryAddress.address),e.xp6(6),e.Oqu(null==r.orderData[0]||null==r.orderData[0].listingData?null:r.orderData[0].listingData.label),e.xp6(4),e.Q6J("ngForOf",null==r.orderData[0]?null:r.orderData[0].orderedItems),e.xp6(7),e.hij("\u20b9 ",null==r.orderData[0]?null:r.orderData[0].gstAmount,""),e.xp6(4),e.hij("Delivery (",null==r.orderData[0]?null:r.orderData[0].deliveryOption.type,")"),e.xp6(3),e.Oqu(null==r.orderData[0]?null:r.orderData[0].deliveryOption.price),e.xp6(7),e.hij("\u20b9 ",null==r.orderData[0]?null:r.orderData[0].itemsCostIncludingCharges,""),e.xp6(5),e.Q6J("ngIf","Pickup Available"==(null==r.orderData[0]?null:r.orderData[0].deliveryOption.type)),e.xp6(1),e.Q6J("ngIf","Pickup Available"==(null==r.orderData[0]?null:r.orderData[0].deliveryOption.type)),e.xp6(1),e.Q6J("ngIf","Pickup Available"!=(null==r.orderData[0]?null:r.orderData[0].deliveryOption.type)),e.xp6(1),e.Q6J("ngIf","Pickup Available"!=(null==r.orderData[0]?null:r.orderData[0].deliveryOption.type)),e.xp6(4),e.Q6J("ngIf","Pickup Available"!=(null==r.orderData[0]||null==r.orderData[0].deliveryOption?null:r.orderData[0].deliveryOption.type)),e.xp6(1),e.Q6J("ngIf","Pickup Available"==(null==r.orderData[0]||null==r.orderData[0].deliveryOption?null:r.orderData[0].deliveryOption.type)),e.xp6(6),e.Oqu(null==r.orderData[0]||null==r.orderData[0].deliveryAddress?null:r.orderData[0].deliveryAddress.LocationUrl))},dependencies:[p.sg,p.O5,u.wI,u.W2,u.Gu,u.gu,u.Nd,u.yW,u.sr,p.uU],styles:[".input_selection[_ngcontent-%COMP%]{border:solid 1px black;border-radius:14px;min-height:75px;box-shadow:none;--padding-start: 10px;margin-top:8px}ion-textarea.custom-textarea[_ngcontent-%COMP%]{--color: black;padding:10px;border-radius:14px;--placeholder-color: black;--placeholder-opacity: .8;border:black;border-style:solid;border-width:1px}.scroll_width[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:0px}.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}button[disabled][_ngcontent-%COMP%]{cursor:no-drop;opacity:.3}button[_ngcontent-%COMP%]{background-color:#d3d3d3}"]}),s})()}];let C=(()=>{var o;class s{}return(o=s).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.Bz.forChild(T),h.Bz]}),s})(),k=(()=>{var o;class s{}return(o=s).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.ez,n.u5,u.Pc,C]}),s})()},5565:(A,f,l)=>{l.d(f,{l:()=>Z});var p=l(5861),n=l(553),u=l(5678),h=l(2436),v=l(9862),e=l(4414);let Z=(()=>{var g;class U{constructor(t,m,_,D){this.route=t,this.http=m,this.alertController=_,this.loadingController=D}getUsersCount(t){return this.http.post(n.N.baseUrl+"/admin/getUsersCount",t)}getListingsCount(t){return this.http.post(n.N.baseUrl+"/admin/getListingsCount",t)}getAllListings(t){return this.http.post(n.N.baseUrl+"/admin/getAllListings",t)}getListingBasedOnId(t){return this.http.post(n.N.baseUrl+"/admin/getListingBasedOnId",t)}getAllUsersList(t){return this.http.post(n.N.baseUrl+"/admin/getAllUsersList",t)}getUserBasedOnId(t){return this.http.post(n.N.baseUrl+"/admin/getUserBasedOnId",t)}activeDeActiveListing(t){return this.http.post(n.N.baseUrl+"/admin/activeDeActiveListing",t)}createMaker(t){return this.http.post(n.N.baseUrl+"/admin/createMaker",t)}updateKitchenImages(t){return this.http.post(n.N.baseUrl+"/admin/updateKitchenImages",t)}updateBankDetails(t){return this.http.post(n.N.baseUrl+"/admin/updateBankDetails",t)}getUserOverView(t){return this.http.post(n.N.baseUrl+"/admin/getUserOverView",t)}activeDeActiveUser(t){return this.http.post(n.N.baseUrl+"/admin/activeDeActiveUser",t)}getMakerDashboardData(t){return this.http.post(n.N.baseUrl+"/maker/getMakerDashboardData",t)}addEditListing(t){return this.http.post(n.N.baseUrl+"/maker/addEditListing",t)}deleteListing(t){return this.http.post(n.N.baseUrl+"/maker/deleteListing",t)}changeOrderStatus(t){return this.http.post(n.N.baseUrl+"/maker/changeOrderStatus",t)}toggleMakerStatus(t){return this.http.post(n.N.baseUrl+"/maker/toggleMakerStatus",t)}updateCustomerDetails(t){return this.http.post(n.N.baseUrl+"/customer/updateCustomerDetails",t)}getCustomerOrders(t){return this.http.post(n.N.baseUrl+"/customer/getCustomerOrders",t)}getAllListingsForCustomer(t){return this.http.post(n.N.baseUrl+"/auth/getAllListingsForCustomer",t)}setFavItem(t){return this.http.post(n.N.baseUrl+"/customer/setFavItem",t)}setUnFavItem(t){return this.http.post(n.N.baseUrl+"/customer/setUnFavItem",t)}getListingForUser(t){return this.http.post(n.N.baseUrl+"/auth/getListingForUser",t)}getCustomerAddress(t){return this.http.post(n.N.baseUrl+"/customer/getCustomerAddress",t)}deleteTempOrder(t){return this.http.post(n.N.baseUrl+"/customer/deleteTempOrder",t)}addCustomerAddress(t){return this.http.post(n.N.baseUrl+"/customer/addCustomerAddress",t)}setDefaultAddress(t){return this.http.post(n.N.baseUrl+"/customer/setDefaultAddress",t)}deleteAddress(t){return this.http.post(n.N.baseUrl+"/customer/deleteAddress",t)}addToCart(t){return this.http.post(n.N.baseUrl+"/customer/addToCart",t)}getCustomerOrderSummary(t){return this.http.post(n.N.baseUrl+"/customer/getCustomerOrderSummary",t)}placeOrder(t){return this.http.post(n.N.baseUrl+"/customer/placeOrder",t)}presentDeleteConfirmation(t,m,_){var D=this;return(0,p.Z)(function*(){return new Promise(function(){var O=(0,p.Z)(function*(b){yield(yield D.alertController.create({header:t,message:m,cssClass:_,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{b(!1)}},{text:"OK",cssClass:"primary",handler:()=>{b(!0)}}]})).present()});return function(b){return O.apply(this,arguments)}}())})()}presentLoading(){var t=this;return(0,p.Z)(function*(){const m=yield t.loadingController.create({message:"Loading...",translucent:!0,backdropDismiss:!1});return yield m.present(),m})()}}return(g=U).\u0275fac=function(t){return new(t||g)(u.LFG(h.F0),u.LFG(v.eN),u.LFG(e.Br),u.LFG(e.HT))},g.\u0275prov=u.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),U})()}}]);