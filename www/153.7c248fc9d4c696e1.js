"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[153],{153:(O,C,i)=>{i.r(C),i.d(C,{CustomerProfilePageModule:()=>y});var _=i(3609),o=i(2436),m=i(5861),c=i(95),e=i(5678),p=i(6593),b=i(5565),h=i(185),v=i(6814),u=i(9004);function t(n,g){if(1&n&&e._UZ(0,"img",21),2&n){const l=e.oxw();let r;e.Q6J("src",null==(r=l.userDataForm.get("image"))?null:r.value,e.LSH)}}function f(n,g){if(1&n){const l=e.EpF();e.TgZ(0,"label",22)(1,"input",23),e.NdJ("change",function(a){e.CHM(l);const s=e.oxw();return e.KtG(s.onFileSelected(a))}),e.qZA(),e._uU(2," Choose Photo* "),e.qZA()}}function U(n,g){if(1&n){const l=e.EpF();e.TgZ(0,"label",24)(1,"input",23),e.NdJ("change",function(a){e.CHM(l);const s=e.oxw();return e.KtG(s.onFileSelected(a))}),e.qZA(),e._uU(2," Change Photo "),e.qZA()}}function D(n,g){if(1&n){const l=e.EpF();e.TgZ(0,"ion-row",25)(1,"ion-col",26)(2,"ion-toggle",27),e.NdJ("ngModelChange",function(a){e.CHM(l);const s=e.oxw();return e.KtG(s.isToggleChecked=a)})("ionChange",function(){e.CHM(l);const a=e.oxw();return e.KtG(a.toggleChanged())}),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"ion-text"),e._uU(5,"Switch to Maker"),e.qZA()()()}if(2&n){const l=e.oxw();e.xp6(2),e.Q6J("ngModel",l.isToggleChecked)}}function M(n,g){if(1&n){const l=e.EpF();e.TgZ(0,"ion-footer",28)(1,"ion-card",29)(2,"ion-row")(3,"ion-col",30),e.NdJ("click",function(){e.CHM(l);const a=e.oxw();return e.KtG(a.goToOrders())}),e._UZ(4,"ion-ripple-effect",31)(5,"ion-icon",32),e.TgZ(6,"ion-text",33),e._uU(7,"Orders"),e.qZA()(),e.TgZ(8,"ion-col",30),e.NdJ("click",function(){e.CHM(l);const a=e.oxw();return e.KtG(a.goToDashboard())}),e._UZ(9,"ion-ripple-effect",31)(10,"ion-icon",34),e.TgZ(11,"ion-text",33),e._uU(12,"Listings"),e.qZA()(),e.TgZ(13,"ion-col",35),e._UZ(14,"ion-ripple-effect",31)(15,"ion-icon",36),e.TgZ(16,"ion-text",33),e._uU(17,"Profile"),e.qZA()()()()()}}const A=[{path:"",component:(()=>{var n;class g{constructor(r,a,s,d,P){this.router=r,this.fb=a,this.sanitizer=s,this.adminService=d,this.authService=P,this.edit=!1,this.isToggleChecked=!1,this.userDataForm=this.fb.group({userName:["",c.kI.required],email:["",c.kI.required],mobile:[""],city:["",c.kI.required],image:["",c.kI.required],imageName:[""],imageId:""})}ngOnInit(){}ionViewWillEnter(){var r=this;return(0,m.Z)(function*(){let a=localStorage.getItem("userData");if(r.userData=JSON.parse(a)||{},r.isToggleChecked=!1,r.userData.profileId){var s;r.edit=!0;let d=yield r.authService.getLogoImageById({fileId:r.userData.profileId}),P=null==d||null===(s=d.data)||void 0===s?void 0:s.name,N="";d.success||(N=""),"svg+xml"==d.data.mimetype&&(N=yield r.sanitizer.bypassSecurityTrustResourceUrl(`data:image/svg+xml;base64,${d.data.data}`)),N=`data:image/jpg;base64,${d.data.data}`,r.userDataForm.patchValue({image:N,imageName:P,imageId:r.userData.profileId})}r.userData&&r.userDataForm.patchValue({userName:r.userData.userName,email:r.userData.email,mobile:r.userData.mobileNumber,city:r.userData.address})})()}toggleChanged(){this.adminService.toggleMakerStatus({value:!1}).subscribe(r=>{r.success&&r.userData&&(localStorage.setItem("userData",JSON.stringify(r.userData)),localStorage.removeItem("order"),this.router.navigate(["/makerDashboard"]))},r=>{console.log("error at updating role",r.message)})}onFileSelected(r){const s=r.target.files;s&&s.length>0&&this.uploadPhoto(s[0])}uploadPhoto(r){if(r&&this.userDataForm&&this.userDataForm.get("image")){const a=new FileReader;a.onload=s=>{this.userDataForm.patchValue({image:s.target.result,imageName:r.name,imageId:""})},a.readAsDataURL(r)}}saveProfile(){this.adminService.updateCustomerDetails(this.userDataForm.value).subscribe(a=>{a.success&&a.data&&(localStorage.setItem("userData",JSON.stringify(a.data)),this.router.navigate(["/customerListings"]))},a=>{console.log("userNot found , show error")})}goToOrders(){this.router.navigate(["/orders"])}goToDashboard(){this.router.navigate(["/customerListings"])}logOut(){var r=this;this.authService.logOut({}).subscribe(function(){var a=(0,m.Z)(function*(s){yield localStorage.clear(),r.router.navigate(["/customerListings"])});return function(s){return a.apply(this,arguments)}}(),a=>{console.log(a)})}}return(n=g).\u0275fac=function(r){return new(r||n)(e.Y36(o.F0),e.Y36(c.qu),e.Y36(p.H7),e.Y36(b.l),e.Y36(h.u))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-customer-profile"]],decls:38,vars:7,consts:[[3,"fullscreen"],[2,"height","100%","padding","20px"],[2,"border-bottom","none !important","width","100%","justify-content","end"],["name","log-out-outline",2,"height","30px","width","30px",3,"click"],[2,"border-bottom","none !important","width","100%"],[1,"kd_col_center_align",2,"flex-direction","column"],[1,"profile-photo-container"],[3,"src",4,"ngIf"],["class","upload-label",4,"ngIf"],["class","change-file-label",4,"ngIf"],["style","border-bottom: none !important; width: 100%;text-align: center;",4,"ngIf"],[3,"formGroup"],[1,"input_selection",2,"display","grid","align-items","center"],["position","stacked"],["formControlName","userName","aria-label","Name","placeholder","Enter Name"],["formControlName","email","aria-label","Email","placeholder","Enter Email"],["formControlName","mobile","aria-label","Mobile","placeholder","Enter Mobile"],["formControlName","city","aria-label","Location","placeholder","Enter Location"],[1,"kd_save_button",3,"click"],[2,"height","100px"],["style","bottom: 0px; position: absolute",4,"ngIf"],[3,"src"],[1,"upload-label"],["type","file","accept","image/*",3,"change"],[1,"change-file-label"],[2,"border-bottom","none !important","width","100%","text-align","center"],[1,"text_center",2,"margin-top","0px"],["aria-label","Dark toggle","color","success",2,"padding-top","15px",3,"ngModel","ngModelChange","ionChange"],[2,"bottom","0px","position","absolute"],[2,"margin","0px","border-radius","0px","padding","10px"],[1,"kd_flex","kd_flex_col_center","ion-activatable","ripple-parent",3,"click"],[1,"ripple_background"],["name","bag-handle-outline",1,"footer_icon_styles"],[1,"icon-text_styles"],["name","list-circle-outline",1,"footer_icon_styles"],[1,"kd_flex","kd_flex_col_center","ion-activatable","ripple-parent"],["name","person-circle-outline",1,"footer_icon_styles"]],template:function(r,a){if(1&r&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"ion-row",2)(3,"ion-icon",3),e.NdJ("click",function(){return a.logOut()}),e.qZA()(),e.TgZ(4,"ion-row",4)(5,"ion-col")(6,"div",5)(7,"div",6),e.YNc(8,t,1,1,"img",7)(9,f,3,0,"label",8),e.qZA(),e.YNc(10,U,3,0,"label",9),e.qZA()()(),e.YNc(11,D,6,1,"ion-row",10),e.TgZ(12,"form",11)(13,"div")(14,"ion-card",12)(15,"ion-item")(16,"ion-label",13),e._uU(17,"Name*"),e.qZA(),e._UZ(18,"ion-input",14),e.qZA()(),e.TgZ(19,"ion-card",12)(20,"ion-item")(21,"ion-label",13),e._uU(22,"Email*"),e.qZA(),e._UZ(23,"ion-input",15),e.qZA()(),e.TgZ(24,"ion-card",12)(25,"ion-item")(26,"ion-label",13),e._uU(27,"Mobile*"),e.qZA(),e._UZ(28,"ion-input",16),e.qZA()(),e.TgZ(29,"ion-card",12)(30,"ion-item")(31,"ion-label",13),e._uU(32,"Location*"),e.qZA(),e._UZ(33,"ion-input",17),e.qZA()()()(),e.TgZ(34,"ion-button",18),e.NdJ("click",function(){return a.saveProfile()}),e._uU(35,"Save"),e.qZA(),e._UZ(36,"div",19),e.qZA()(),e.YNc(37,M,18,0,"ion-footer",20)),2&r){let s,d,P;e.Q6J("fullscreen",!0),e.xp6(8),e.Q6J("ngIf",null==a.userDataForm||null==(s=a.userDataForm.get("image"))?null:s.value),e.xp6(1),e.Q6J("ngIf",!(null!=(d=a.userDataForm.get("image"))&&d.value)),e.xp6(1),e.Q6J("ngIf",null==(P=a.userDataForm.get("image"))?null:P.value),e.xp6(1),e.Q6J("ngIf","maker"===(null==a.userData?null:a.userData.primaryRole)),e.xp6(1),e.Q6J("formGroup",a.userDataForm),e.xp6(25),e.Q6J("ngIf",a.edit)}},dependencies:[v.O5,u.YG,u.PM,u.wI,u.W2,u.fr,u.gu,u.pK,u.Ie,u.Q$,u.H$,u.Nd,u.yW,u.ho,u.w,u.j9,c._Y,c.JJ,c.JL,c.On,c.sg,c.u],styles:[".input_selection[_ngcontent-%COMP%]{border:solid 2px black;border-radius:14px;height:70px;margin:20px 0;padding:15px 10px 10px;box-shadow:none}.profile-photo-container[_ngcontent-%COMP%]{position:relative;width:150px;height:150px;overflow:hidden}.profile-photo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%}.upload-label[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center;width:100%;height:100%;cursor:pointer;border:2px dashed #ccc;border-radius:50%}.upload-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.change-file-label[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:150px;height:40px;cursor:pointer;background-color:#f5f5f5;border:2px dashed #ccc;border-radius:4px;margin-top:10px}.change-file-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}"]}),g})()}];let T=(()=>{var n;class g{}return(n=g).\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[o.Bz.forChild(A),o.Bz]}),g})(),y=(()=>{var n;class g{}return(n=g).\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[_.m,T]}),g})()},5565:(O,C,i)=>{i.d(C,{l:()=>b});var _=i(5861),o=i(553),m=i(5678),c=i(2436),e=i(9862),p=i(4414);let b=(()=>{var h;class v{constructor(t,f,U,D){this.route=t,this.http=f,this.alertController=U,this.loadingController=D}getUsersCount(t){return this.http.post(o.N.baseUrl+"/admin/getUsersCount",t)}getListingsCount(t){return this.http.post(o.N.baseUrl+"/admin/getListingsCount",t)}getAllListings(t){return this.http.post(o.N.baseUrl+"/admin/getAllListings",t)}getListingBasedOnId(t){return this.http.post(o.N.baseUrl+"/admin/getListingBasedOnId",t)}getAllUsersList(t){return this.http.post(o.N.baseUrl+"/admin/getAllUsersList",t)}getUserBasedOnId(t){return this.http.post(o.N.baseUrl+"/admin/getUserBasedOnId",t)}activeDeActiveListing(t){return this.http.post(o.N.baseUrl+"/admin/activeDeActiveListing",t)}createMaker(t){return this.http.post(o.N.baseUrl+"/admin/createMaker",t)}updateKitchenImages(t){return this.http.post(o.N.baseUrl+"/admin/updateKitchenImages",t)}updateBankDetails(t){return this.http.post(o.N.baseUrl+"/admin/updateBankDetails",t)}getUserOverView(t){return this.http.post(o.N.baseUrl+"/admin/getUserOverView",t)}activeDeActiveUser(t){return this.http.post(o.N.baseUrl+"/admin/activeDeActiveUser",t)}getMakerDashboardData(t){return this.http.post(o.N.baseUrl+"/maker/getMakerDashboardData",t)}addEditListing(t){return this.http.post(o.N.baseUrl+"/maker/addEditListing",t)}deleteListing(t){return this.http.post(o.N.baseUrl+"/maker/deleteListing",t)}changeOrderStatus(t){return this.http.post(o.N.baseUrl+"/maker/changeOrderStatus",t)}toggleMakerStatus(t){return this.http.post(o.N.baseUrl+"/maker/toggleMakerStatus",t)}updateCustomerDetails(t){return this.http.post(o.N.baseUrl+"/customer/updateCustomerDetails",t)}getCustomerOrders(t){return this.http.post(o.N.baseUrl+"/customer/getCustomerOrders",t)}getAllListingsForCustomer(t){return this.http.post(o.N.baseUrl+"/auth/getAllListingsForCustomer",t)}setFavItem(t){return this.http.post(o.N.baseUrl+"/customer/setFavItem",t)}setUnFavItem(t){return this.http.post(o.N.baseUrl+"/customer/setUnFavItem",t)}getListingForUser(t){return this.http.post(o.N.baseUrl+"/auth/getListingForUser",t)}getCustomerAddress(t){return this.http.post(o.N.baseUrl+"/customer/getCustomerAddress",t)}deleteTempOrder(t){return this.http.post(o.N.baseUrl+"/customer/deleteTempOrder",t)}addCustomerAddress(t){return this.http.post(o.N.baseUrl+"/customer/addCustomerAddress",t)}setDefaultAddress(t){return this.http.post(o.N.baseUrl+"/customer/setDefaultAddress",t)}deleteAddress(t){return this.http.post(o.N.baseUrl+"/customer/deleteAddress",t)}addToCart(t){return this.http.post(o.N.baseUrl+"/customer/addToCart",t)}getCustomerOrderSummary(t){return this.http.post(o.N.baseUrl+"/customer/getCustomerOrderSummary",t)}placeOrder(t){return this.http.post(o.N.baseUrl+"/customer/placeOrder",t)}presentDeleteConfirmation(t,f,U){var D=this;return(0,_.Z)(function*(){return new Promise(function(){var M=(0,_.Z)(function*(x){yield(yield D.alertController.create({header:t,message:f,cssClass:U,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{x(!1)}},{text:"OK",cssClass:"primary",handler:()=>{x(!0)}}]})).present()});return function(x){return M.apply(this,arguments)}}())})()}presentLoading(){var t=this;return(0,_.Z)(function*(){const f=yield t.loadingController.create({message:"Loading...",translucent:!0,backdropDismiss:!1});return yield f.present(),f})()}}return(h=v).\u0275fac=function(t){return new(t||h)(m.LFG(c.F0),m.LFG(e.eN),m.LFG(p.Br),m.LFG(p.HT))},h.\u0275prov=m.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),v})()},3609:(O,C,i)=>{i.d(C,{m:()=>e});var _=i(9004),o=i(95),m=i(6814),c=i(5678);let e=(()=>{var p;class b{}return(p=b).\u0275fac=function(v){return new(v||p)},p.\u0275mod=c.oAB({type:p}),p.\u0275inj=c.cJS({imports:[m.ez,_.Pc,o.u5,o.UX,m.ez,_.Pc,o.u5,o.UX]}),b})()}}]);