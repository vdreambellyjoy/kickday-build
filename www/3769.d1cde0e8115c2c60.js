"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3769],{3769:(L,C,c)=>{c.r(C),c.d(C,{CustomerListingOverviewPageModule:()=>S});var f=c(3609),r=c(2436),m=c(5861),e=c(5678),x=c(4414),d=c(9004),w=c(5565),v=c(185),h=c(6814),T=c(95),i=c(9172);const O=["swiper"];function D(o,u){if(1&o){const s=e.EpF();e.TgZ(0,"ion-icon",35),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.favItem())}),e.qZA()}}function y(o,u){if(1&o){const s=e.EpF();e.TgZ(0,"ion-icon",36),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.unFavItem())}),e.qZA()}}function U(o,u){if(1&o&&(e.TgZ(0,"swiper-slide"),e._UZ(1,"img",37),e.ALo(2,"async"),e.ALo(3,"getLogo"),e.qZA()),2&o){const s=u.$implicit;e.xp6(1),e.Q6J("src",e.lcZ(2,1,e.lcZ(3,3,s)),e.LSH)}}function b(o,u){if(1&o&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"br"),e.BQk()),2&o){const s=e.oxw();e.xp6(2),e.Oqu(s.listingData.makerData.userName)}}function Z(o,u){if(1&o&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.BQk()),2&o){const s=e.oxw();e.xp6(2),e.Oqu(s.listingData.makerData.address)}}function A(o,u){if(1&o){const s=e.EpF();e.TgZ(0,"ion-row",38)(1,"ion-col")(2,"ion-text"),e._uU(3),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"div",39)(6,"ion-text"),e._uU(7),e.qZA()()(),e.TgZ(8,"ion-col",40)(9,"ion-text"),e._uU(10),e.qZA()(),e.TgZ(11,"ion-col",41)(12,"ion-button",42)(13,"ion-button",43),e.NdJ("click",function(){const l=e.CHM(s).$implicit,a=e.oxw();return e.KtG(a.decrementCount(l))}),e._UZ(14,"ion-icon",44),e.qZA(),e.TgZ(15,"span",45),e._uU(16),e.qZA(),e.TgZ(17,"ion-button",46),e.NdJ("click",function(){const l=e.CHM(s).$implicit,a=e.oxw();return e.KtG(a.incrementCount(l))}),e._UZ(18,"ion-icon",47),e.qZA()()(),e.TgZ(19,"ion-col",48)(20,"ion-text"),e._uU(21),e.qZA()()()}if(2&o){const s=u.$implicit;e.xp6(3),e.Oqu(s.name),e.xp6(4),e.hij("",s.quantity-s.count," Left"),e.xp6(3),e.hij("\u20b9 ",s.price,""),e.xp6(6),e.Oqu(s.count),e.xp6(1),e.Q6J("disabled",s.count>=s.quantity),e.xp6(4),e.hij("Individual Item Cost: \u20b9 ",s.individualItemCost,"")}}const P=o=>({"selected-button":o});function I(o,u){if(1&o){const s=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(){const l=e.CHM(s).$implicit,a=e.oxw();return e.KtG(a.selectDeliveryType(l.type))}),e.TgZ(1,"ion-row")(2,"ion-col",40),e._UZ(3,"ion-icon",50),e.TgZ(4,"ion-text",51),e._uU(5),e.qZA()()(),e.TgZ(6,"ion-row")(7,"ion-col",52)(8,"ion-text",53),e._uU(9,"Delivery Available"),e.qZA()()()()}if(2&o){const s=u.$implicit,t=e.oxw();e.ekj("selected",t.selectedDeliveryType===s.type),e.Q6J("ngClass",e.VKq(4,P,t.selectedDeliveryType===s.type)),e.xp6(5),e.Oqu(s.type)}}const M=[{path:"",component:(()=>{var o;class u{constructor(t,n,l,a,_){this.router=t,this.model=n,this.alert=l,this.adminService=a,this.authService=_,this._id="",this.listingData={},this.totalCost=0,this.note="",this.swiperHeight="240px",this.selectedDeliveryType=null}ngOnInIt(){}swiperReady(){var t;this.swiper=null===(t=this.swiperRef)||void 0===t?void 0:t.nativeElement.swiper}ionViewWillEnter(){var t=this;return(0,m.Z)(function*(){var n;t._id=t.router.url.split("/")[2],t.listingData={},t.totalCost=0,t.selectedDeliveryType="",t.note="";let l=localStorage.getItem("userData");t.userData=JSON.parse(l);const a=yield t.adminService.presentLoading();t.adminService.getListingForUser({_id:t._id,userId:(null===(n=t.userData)||void 0===n?void 0:n._id)||""}).subscribe(p=>{p.success&&p.data?(t.listingData=p.data||{},t.swiperHeight="241px",t.listingData.listingOrders.forEach(g=>{g.count=void 0!==g.quantity?0:g.quantity,g.individualItemCost=g.price*g.count||0}),t.calculateTotalCost()):t.navigateToListings(),a.dismiss()},p=>{t.navigateToListings(),a.dismiss()});let _=localStorage.getItem("order");if(_){let p=JSON.parse(_);localStorage.removeItem("order"),t.continueProcess(p)}})()}selectDeliveryType(t){this.selectedDeliveryType=t}swiperSlideChanged(t){console.log("changed: ",t)}favItem(){this.adminService.setFavItem({_id:this._id}).subscribe(t=>{t.success&&(this.listingData.favourite=!0)},t=>{console.log(t)})}unFavItem(){this.adminService.setUnFavItem({_id:this._id}).subscribe(t=>{t.success&&(this.listingData.favourite=!1)},t=>{console.log(t)})}incrementCount(t){t&&"count"in t&&"quantity"in t?t.count<t.quantity&&(t.count=(t.count||0)+1,t.individualItemCost=t.price*t.count||0,this.calculateTotalCost()):console.warn("Order object or its properties are undefined or missing.")}decrementCount(t){t.count&&t.count>0&&(t.count--,t.individualItemCost=t.price*t.count||0,this.calculateTotalCost())}calculateTotalCost(){this.totalCost=this.listingData.listingOrders.reduce((t,n)=>t+n.individualItemCost||0,0)}addToCart(){let t=this.listingData.listingOrders.filter(a=>a.count),n=this.listingData.deliveryOptions.find(a=>a.type==this.selectedDeliveryType),l={refListingId:this.listingData._id,refMakerId:this.listingData.refMakerId,deliveryOption:n,note:this.note,finalCostWithOutDeliveryOption:this.totalCost,orderedItems:t};if(this.totalCost&&this.selectedDeliveryType)if(localStorage.getItem("token")&&localStorage.getItem("userData")){let a=localStorage.getItem("token"),_=JSON.parse(a);this.authService.checkUserToken({token:_}).subscribe(p=>{p.data&&p.success?(localStorage.setItem("userData",JSON.stringify(p.data)),this.continueProcess(l)):(localStorage.setItem("order",JSON.stringify(l)),this.router.navigate(["/login"]))},p=>{localStorage.clear(),localStorage.setItem("order",JSON.stringify(l)),this.router.navigate(["/login"])})}else localStorage.clear(),localStorage.setItem("order",JSON.stringify(l)),this.router.navigate(["/login"]);else console.log("Please select")}continueProcess(t){this.adminService.addToCart(t).subscribe(n=>{n.success&&n._id?this.router.navigateByUrl("/orderSummary/"+n._id):this.openAlert("ERROR","something went wrong please try again later",["close"])},n=>{this.openAlert("ERROR","something went wrong please try again later",["close"])})}navigateToListings(){this.router.navigate(["/customerListings"])}openAlert(t,n,l){var a=this;return(0,m.Z)(function*(){yield(yield a.alert.create({header:t,message:n,buttons:l,mode:"ios"})).present()})()}goBack(){var t=this;return(0,m.Z)(function*(){var n;if((null===(n=t.listingData)||void 0===n||null===(n=n.listingOrders)||void 0===n?void 0:n.filter(a=>a.count)).length){const a=yield t.adminService.presentDeleteConfirmation("Confirm","Sure you want to cancel the order?","");console.log({confirmed:a}),a&&t.router.navigate(["/customerListings"])}else t.router.navigate(["/customerListings"])})()}formatDate(t){const n=new Date(t);return`${n.getDate()} ${n.toLocaleString("en-US",{month:"short"})} ${n.toLocaleString("en-US",{weekday:"short"})} ${n.toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`}shareLink(){if(navigator.share){var t,n;let g="\u{1f354}\u2728 *Delicious Food Alert!* \u2728\u{1f355}\n\n";g+=`\u{1f37d}\ufe0f *Item* : ${(null===(t=this.listingData)||void 0===t||null===(t=t.listingOrders)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.name)||"\u{1f37d}\ufe0f Title not available"}\n`,g+=`\n\u23f0 *Order Ends On* : ${this.listingData.orderEndsOn?this.formatDate(this.listingData.orderEndsOn):"\u23f3 End date not available"}\n`,g+=`\u{1f4e6} *Order Delivered On* : ${this.listingData.orderDeliveredOn?this.formatDate(this.listingData.orderDeliveredOn):"\u{1f4e6} Delivered date not available"}\n`,g+=`\u{1f4cd} *Location* : ${(null===(n=this.listingData.makerData)||void 0===n?void 0:n.address)||"\u{1f4cd} Location not available"}\n`,g+="\n\u{1f449} *Order Now and Savor the Flavor!* \u{1f374}\u{1f496}\n",g+=`\n\u{1f680} *Check it out here* : ${location.href}\n`,navigator.share({text:g}).then(()=>console.log("Successful share")).catch(k=>{console.log("Error sharing:",k),alert("Error sharing content. Please try again.")})}else console.log("Web Share API not supported."),alert("Web Share API not supported.")}}return(o=u).\u0275fac=function(t){return new(t||o)(e.Y36(r.F0),e.Y36(x.IN),e.Y36(x.Br),e.Y36(w.l),e.Y36(v.u))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-customer-listing-overview"]],viewQuery:function(t,n){if(1&t&&e.Gf(O,5),2&t){let l;e.iGM(l=e.CRH())&&(n.swiperRef=l.first)}},decls:67,vars:26,consts:[[2,"box-shadow","none",3,"translucent"],[2,"margin","10px"],[2,"display","flex","justify-content","start","align-items","center"],["name","arrow-back-outline",1,"kd_svg_size",3,"click"],[2,"display","flex","justify-content","center","align-items","center"],["name","star-outline","class","kd_svg_size",3,"click",4,"ngIf"],["name","star","class","kd_svg_size","style","color:blue",3,"click",4,"ngIf"],[2,"display","flex","justify-content","center","align-items","center",3,"click"],["name","share-social-outline",1,"kd_svg_size"],[2,"display","flex","justify-content","end","align-items","center"],["name","bag-handle-outline",1,"kd_svg_size"],[3,"fullscreen"],[2,"margin","15px"],[1,"kd_orders_card",2,"margin","0px"],[2,"overflow","hidden",3,"loop","pagination","slidesPerView","slidesPerGroup","afterinit","change"],["swiper",""],[4,"ngFor","ngForOf"],[1,"kd_center_align_items",2,"margin","10px 0px","font-weight","bold"],["name","bag-handle-outline",1,"icon_style",2,"padding-right","6px"],["size","6"],[2,"margin-top","3px"],["name","calendar-outline",1,"icon_style"],[2,"font-weight","bold"],[1,"kd_flex",2,"margin-top","3px"],[1,"first_letter_styles"],[2,"padding-left","10px","font-size","13px"],[4,"ngIf"],[2,"font-size","22px","font-weight","600"],["style","padding-top: 15px;",4,"ngFor","ngForOf"],[2,"padding","15px 5px"],["placeholder","Note",1,"custom-textarea",3,"ngModel","ngModelChange"],[1,"scroll_width"],[2,"overflow-x","auto","white-space","nowrap","display","flex","margin","5px"],["style","border: solid 2px; border-radius: 14px; padding: 10px 0px; margin-right: 15px;",3,"selected","ngClass","click",4,"ngFor","ngForOf"],[3,"click"],["name","star-outline",1,"kd_svg_size",3,"click"],["name","star",1,"kd_svg_size",2,"color","blue",3,"click"],[3,"src"],[2,"padding-top","15px"],[2,"padding-top","5px"],[1,"kd_flex","kd_center_align"],[1,"kd_flex","kd_end_align"],[1,"count_button"],[1,"count_button",2,"--border-radius","0px","--background","white !important","--background-activated","#bcc4e8",3,"click"],["name","remove-outline"],[1,"count",2,"padding","0px 8px"],[1,"count_button",2,"--border-radius","0px","--background","white !important","--background-activated","#bcc4e8",3,"disabled","click"],["name","add-outline"],["size","12",1,"kd_flex","kd_end_align"],[2,"border","solid 2px","border-radius","14px","padding","10px 0px","margin-right","15px",3,"ngClass","click"],["name","home-outline",1,"icon_style",2,"padding-right","5px","color","white"],[2,"font-size","12px","font-weight","bold","color","white"],[2,"text-align","center"],[1,"kd_font_size_12",2,"color","white"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-row",1)(3,"ion-col",2)(4,"ion-icon",3),e.NdJ("click",function(){return n.goBack()}),e.qZA()(),e.TgZ(5,"ion-col",4),e.YNc(6,D,1,0,"ion-icon",5)(7,y,1,0,"ion-icon",6),e.qZA(),e.TgZ(8,"ion-col",7),e.NdJ("click",function(){return n.shareLink()}),e._UZ(9,"ion-icon",8),e.qZA(),e.TgZ(10,"ion-col",9),e._UZ(11,"ion-icon",10),e.qZA()()()(),e.TgZ(12,"ion-content",11)(13,"div",12)(14,"ion-card",13)(15,"swiper-container",14,15),e.NdJ("afterinit",function(){return n.swiperReady()})("change",function(a){return n.swiperSlideChanged(a)}),e.YNc(17,U,4,5,"swiper-slide",16),e.qZA()(),e.TgZ(18,"ion-row")(19,"ion-col",17),e._UZ(20,"ion-icon",18),e.TgZ(21,"ion-text"),e._uU(22),e.qZA()()(),e.TgZ(23,"ion-row")(24,"ion-col",19)(25,"ion-text"),e._uU(26,"Order Delivered On"),e.qZA(),e.TgZ(27,"div",20),e._UZ(28,"ion-icon",21),e.TgZ(29,"ion-text"),e._uU(30),e.ALo(31,"date"),e.qZA()()(),e.TgZ(32,"ion-col",19)(33,"ion-text",22),e._uU(34,"Maker Details"),e.qZA(),e.TgZ(35,"div",23)(36,"div",24)(37,"ion-text",22),e._uU(38,"R"),e.qZA()(),e.TgZ(39,"ion-text",25),e.YNc(40,b,4,1,"ng-container",26)(41,Z,3,1,"ng-container",26),e.qZA()()()(),e.TgZ(42,"ion-row")(43,"ion-col")(44,"ion-text",27),e._uU(45),e.qZA()()(),e.TgZ(46,"ion-row")(47,"ion-col")(48,"ion-text"),e._uU(49,"Order Ends On"),e.qZA(),e.TgZ(50,"div",20),e._UZ(51,"ion-icon",21),e.TgZ(52,"ion-text"),e._uU(53),e.ALo(54,"date"),e.qZA()()()(),e.YNc(55,A,22,6,"ion-row",28),e.TgZ(56,"ion-row")(57,"ion-col",29)(58,"ion-textarea",30),e.NdJ("ngModelChange",function(a){return n.note=a}),e.qZA()()(),e.TgZ(59,"ion-row")(60,"ion-toolbar",31)(61,"div",32),e.YNc(62,I,10,6,"button",33),e.qZA()()(),e.TgZ(63,"ion-row")(64,"ion-col")(65,"ion-button",34),e.NdJ("click",function(){return n.addToCart()}),e._uU(66,"ADD TO CART"),e.qZA()()()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("ngIf",!n.listingData.favourite),e.xp6(1),e.Q6J("ngIf",n.listingData.favourite),e.xp6(5),e.Q6J("fullscreen",!0),e.xp6(3),e.Udp("height",n.swiperHeight),e.Q6J("loop",!0)("pagination",!0)("slidesPerView",1)("slidesPerGroup",1),e.xp6(2),e.Q6J("ngForOf",n.listingData.imageArray),e.xp6(5),e.Oqu(null==n.listingData||null==n.listingData.listingOrders||null==n.listingData.listingOrders[0]?null:n.listingData.listingOrders[0].name),e.xp6(8),e.Oqu(e.xi3(31,20,n.listingData.orderDeliveredOn,"d MMMM EEE")),e.xp6(10),e.Q6J("ngIf",n.listingData.makerData),e.xp6(1),e.Q6J("ngIf",n.listingData.makerData),e.xp6(4),e.Oqu(n.listingData.label),e.xp6(8),e.Oqu(e.xi3(54,23,n.listingData.orderEndsOn,"dd MMMM EEE hh:mm a")),e.xp6(2),e.Q6J("ngForOf",n.listingData.listingOrders),e.xp6(3),e.Q6J("ngModel",n.note),e.xp6(4),e.Q6J("ngForOf",n.listingData.deliveryOptions))},dependencies:[h.mk,h.sg,h.O5,d.YG,d.PM,d.wI,d.W2,d.Gu,d.gu,d.Nd,d.yW,d.g2,d.sr,d.j9,T.JJ,T.On,i.n,h.Ov,h.uU],styles:["ion-textarea.custom-textarea[_ngcontent-%COMP%]{--color: black;padding:10px;border-radius:14px;--placeholder-color: black;--placeholder-opacity: .8;border:black;border-style:solid;border-width:1px}.location_type_div[_ngcontent-%COMP%]{--background: white;text-align:left;font-size:12px;border:solid 1px;border-radius:14px;min-height:75.2px;min-width:150px;padding:8px;font-weight:700}.ripple-parent[_ngcontent-%COMP%]{position:relative;overflow:hidden}swiper-container[_ngcontent-%COMP%]{--swiper-pagination-bullet-inactive-color: var(--ion-color-step-500, white);--swiper-theme-color: #0aa26d}.selected-button[_ngcontent-%COMP%]{background-color:#e4ac89;color:#946142}"]}),u})()}];let N=(()=>{var o;class u{}return(o=u).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[r.Bz.forChild(M),r.Bz]}),u})(),S=(()=>{var o;class u{}return(o=u).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.m,N]}),u})()},5565:(L,C,c)=>{c.d(C,{l:()=>w});var f=c(5861),r=c(553),m=c(5678),e=c(2436),x=c(9862),d=c(4414);let w=(()=>{var v;class h{constructor(i,O,D,y){this.route=i,this.http=O,this.alertController=D,this.loadingController=y}getUsersCount(i){return this.http.post(r.N.baseUrl+"/admin/getUsersCount",i)}getListingsCount(i){return this.http.post(r.N.baseUrl+"/admin/getListingsCount",i)}getAllListings(i){return this.http.post(r.N.baseUrl+"/admin/getAllListings",i)}getListingBasedOnId(i){return this.http.post(r.N.baseUrl+"/admin/getListingBasedOnId",i)}getAllUsersList(i){return this.http.post(r.N.baseUrl+"/admin/getAllUsersList",i)}getUserBasedOnId(i){return this.http.post(r.N.baseUrl+"/admin/getUserBasedOnId",i)}activeDeActiveListing(i){return this.http.post(r.N.baseUrl+"/admin/activeDeActiveListing",i)}createMaker(i){return this.http.post(r.N.baseUrl+"/admin/createMaker",i)}updateKitchenImages(i){return this.http.post(r.N.baseUrl+"/admin/updateKitchenImages",i)}updateBankDetails(i){return this.http.post(r.N.baseUrl+"/admin/updateBankDetails",i)}getUserOverView(i){return this.http.post(r.N.baseUrl+"/admin/getUserOverView",i)}activeDeActiveUser(i){return this.http.post(r.N.baseUrl+"/admin/activeDeActiveUser",i)}getMakerDashboardData(i){return this.http.post(r.N.baseUrl+"/maker/getMakerDashboardData",i)}addEditListing(i){return this.http.post(r.N.baseUrl+"/maker/addEditListing",i)}deleteListing(i){return this.http.post(r.N.baseUrl+"/maker/deleteListing",i)}changeOrderStatus(i){return this.http.post(r.N.baseUrl+"/maker/changeOrderStatus",i)}toggleMakerStatus(i){return this.http.post(r.N.baseUrl+"/maker/toggleMakerStatus",i)}updateCustomerDetails(i){return this.http.post(r.N.baseUrl+"/customer/updateCustomerDetails",i)}getCustomerOrders(i){return this.http.post(r.N.baseUrl+"/customer/getCustomerOrders",i)}getAllListingsForCustomer(i){return this.http.post(r.N.baseUrl+"/auth/getAllListingsForCustomer",i)}setFavItem(i){return this.http.post(r.N.baseUrl+"/customer/setFavItem",i)}setUnFavItem(i){return this.http.post(r.N.baseUrl+"/customer/setUnFavItem",i)}getListingForUser(i){return this.http.post(r.N.baseUrl+"/auth/getListingForUser",i)}getCustomerAddress(i){return this.http.post(r.N.baseUrl+"/customer/getCustomerAddress",i)}deleteTempOrder(i){return this.http.post(r.N.baseUrl+"/customer/deleteTempOrder",i)}addCustomerAddress(i){return this.http.post(r.N.baseUrl+"/customer/addCustomerAddress",i)}setDefaultAddress(i){return this.http.post(r.N.baseUrl+"/customer/setDefaultAddress",i)}deleteAddress(i){return this.http.post(r.N.baseUrl+"/customer/deleteAddress",i)}addToCart(i){return this.http.post(r.N.baseUrl+"/customer/addToCart",i)}getCustomerOrderSummary(i){return this.http.post(r.N.baseUrl+"/customer/getCustomerOrderSummary",i)}placeOrder(i){return this.http.post(r.N.baseUrl+"/customer/placeOrder",i)}presentDeleteConfirmation(i,O,D){var y=this;return(0,f.Z)(function*(){return new Promise(function(){var U=(0,f.Z)(function*(b){yield(yield y.alertController.create({header:i,message:O,cssClass:D,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{b(!1)}},{text:"OK",cssClass:"primary",handler:()=>{b(!0)}}]})).present()});return function(b){return U.apply(this,arguments)}}())})()}presentLoading(){var i=this;return(0,f.Z)(function*(){const O=yield i.loadingController.create({message:"Loading...",translucent:!0,backdropDismiss:!1});return yield O.present(),O})()}}return(v=h).\u0275fac=function(i){return new(i||v)(m.LFG(e.F0),m.LFG(x.eN),m.LFG(d.Br),m.LFG(d.HT))},v.\u0275prov=m.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),h})()},3609:(L,C,c)=>{c.d(C,{m:()=>x});var f=c(9004),r=c(95),m=c(6814),e=c(5678);let x=(()=>{var d;class w{}return(d=w).\u0275fac=function(h){return new(h||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[m.ez,f.Pc,r.u5,r.UX,m.ez,f.Pc,r.u5,r.UX]}),w})()}}]);